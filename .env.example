# StepheyBot Music - Environment Configuration
# Copy this file to .env and configure your settings

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server binding address (0.0.0.0 for all interfaces, 127.0.0.1 for local only)
SERVER_ADDRESS=0.0.0.0

# Port for the API server
PORT=8083

# Enable admin API endpoints (requires authentication in production)
ENABLE_ADMIN_API=true

# Request timeout in seconds
REQUEST_TIMEOUT=30

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# SQLite database file path
DATABASE_URL=sqlite:data/stepheybot-music.db

# Maximum number of database connections
DB_MAX_CONNECTIONS=10

# Database connection timeout in seconds
DB_CONNECTION_TIMEOUT=30

# =============================================================================
# NAVIDROME INTEGRATION
# =============================================================================

# Navidrome server URL (include http:// or https://)
NAVIDROME_URL=http://localhost:4533

# Navidrome username
NAVIDROME_USERNAME=your_username

# Navidrome password
NAVIDROME_PASSWORD=your_password

# API timeout for Navidrome requests (seconds)
NAVIDROME_TIMEOUT=30

# Verify SSL certificates for HTTPS connections
NAVIDROME_VERIFY_SSL=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# ListenBrainz configuration (for scrobbling)
LISTENBRAINZ_URL=https://api.listenbrainz.org
LISTENBRAINZ_TOKEN=your_listenbrainz_token
LISTENBRAINZ_TIMEOUT=30
LISTENBRAINZ_RATE_LIMIT=5

# Lidarr configuration (for music acquisition)
LIDARR_URL=http://localhost:8686
LIDARR_API_KEY=your_lidarr_api_key
LIDARR_TIMEOUT=30
LIDARR_ENABLE_DOWNLOADS=true
LIDARR_QUALITY_PROFILE_ID=1

# MusicBrainz configuration (for metadata)
MUSICBRAINZ_USER_AGENT=StepheyBot-Music/1.0
MUSICBRAINZ_TIMEOUT=10
MUSICBRAINZ_RATE_LIMIT=1
MUSICBRAINZ_ENABLE_COVER_ART=true

# =============================================================================
# PATHS AND DIRECTORIES
# =============================================================================

# Path to music library (should match Navidrome's music folder)
MUSIC_PATH=/music

# Path for downloads (used by Lidarr integration)
DOWNLOAD_PATH=/downloads

# Cache directory for temporary files and thumbnails
CACHE_PATH=/cache

# Database file directory
DATABASE_PATH=/data

# Log file directory
LOG_PATH=/logs

# =============================================================================
# BACKGROUND TASKS
# =============================================================================

# Enable background synchronization tasks
ENABLE_BACKGROUND_TASKS=true

# How often to sync with Navidrome (in minutes)
SYNC_INTERVAL=30

# How often to update recommendations (in minutes)
RECOMMENDATION_INTERVAL=60

# How often to scan the music library (in minutes)
LIBRARY_SCAN_INTERVAL=240

# How often to clean up old data (in minutes)
CLEANUP_INTERVAL=1440

# =============================================================================
# RECOMMENDATION ENGINE
# =============================================================================

# Number of recommendations to generate per user
RECOMMENDATIONS_COUNT=20

# Minimum listening history required for collaborative filtering
MIN_LISTENING_HISTORY=10

# Weight for collaborative filtering (0.0-1.0)
COLLABORATIVE_WEIGHT=0.4

# Weight for content-based filtering (0.0-1.0)
CONTENT_WEIGHT=0.4

# Weight for popularity-based recommendations (0.0-1.0)
POPULARITY_WEIGHT=0.2

# Enable discovery mode (find hidden gems)
ENABLE_DISCOVERY=true

# Ratio of discovery tracks in recommendations (0.0-1.0)
DISCOVERY_RATIO=0.3

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level: trace, debug, info, warn, error
RUST_LOG=info

# Enable JSON structured logging
LOG_JSON=false

# Write logs to file
LOG_TO_FILE=true

# Log file rotation size (in MB)
LOG_ROTATION_SIZE=10

# Log file retention (in days)
LOG_RETENTION=30

# Enable backtraces for errors
RUST_BACKTRACE=1

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# JWT secret for session management (generate a random string)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Session timeout in hours
SESSION_TIMEOUT=24

# Enable CORS for frontend development
ENABLE_CORS=true

# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Environment: development, production
RUST_ENV=development

# Enable debug mode (more verbose logging, detailed errors)
DEBUG=true

# Enable hot reload for development
HOT_RELOAD=true

# Database reset on startup (development only - deletes all data!)
RESET_DATABASE=false

# Populate sample data on startup
POPULATE_SAMPLE_DATA=true

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# User ID for file permissions in Docker
PUID=1000

# Group ID for file permissions in Docker
PGID=1000

# Timezone for the container
TZ=UTC

# =============================================================================
# HEALTH CHECKS & MONITORING
# =============================================================================

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=30

# Health check timeout (seconds)
HEALTH_CHECK_TIMEOUT=10

# Enable metrics collection
ENABLE_METRICS=true

# Metrics endpoint port
METRICS_PORT=9090

# =============================================================================
# EXAMPLE VALUES FOR COMMON SETUPS
# =============================================================================

# Example for local development:
# NAVIDROME_URL=http://localhost:4533
# NAVIDROME_USERNAME=admin
# NAVIDROME_PASSWORD=password123

# Example for Docker Compose:
# NAVIDROME_URL=http://navidrome:4533
# LIDARR_URL=http://lidarr:8686
# DATABASE_URL=sqlite:/data/stepheybot-music.db

# Example for production:
# NAVIDROME_URL=https://music.yourdomain.com
# ENABLE_ADMIN_API=false
# LOG_JSON=true
# DEBUG=false
# RUST_ENV=production
