import{s as ot,n as Ie,r as it,o as ct,d as ht,b as ut,e as pt,u as _t,g as mt,f as gt,c as yt}from"../chunks/Y-CuHk7n.js";import{S as dt,i as ft,d as n,k as Z,m as r,s as fe,q as be,a as W,b as a,l as re,c as i,e as v,g as S,o as _e,f as F,h as c,j as C,t as z,p as vt,E as bt,z as kt,r as xe,u as $e,B as Et,n as Tt,C as Pt,A as jt}from"../chunks/DKhF1pO8.js";import{e as qe,s as Dt}from"../chunks/BmkXckfa.js";import{p as It}from"../chunks/ChJd58uo.js";function et(s,l,e){const t=s.slice();return t[44]=l[e],t[46]=e,t}function Mt(s){let l,e='<div class="track-icon svelte-1dgjsxy">‚è∏Ô∏è</div> <div class="track-info svelte-1dgjsxy"><div class="track-title svelte-1dgjsxy">No track selected</div> <div class="track-artist svelte-1dgjsxy">Choose a song to start listening</div></div>';return{c(){l=c("div"),l.innerHTML=e,this.h()},l(t){l=i(t,"DIV",{class:!0,"data-svelte-h":!0}),_e(l)!=="svelte-d4zgua"&&(l.innerHTML=e),this.h()},h(){r(l,"class","no-track svelte-1dgjsxy")},m(t,f){W(t,l,f)},p:Ie,d(t){t&&n(l)}}}function wt(s){let l,e,t="üéµ",f,p,d,u,T=s[2].title+"",g,M,y,h=s[2].artist+"",b,k=s[8]&&tt();return{c(){l=c("div"),e=c("div"),e.textContent=t,f=C(),k&&k.c(),p=C(),d=c("div"),u=c("div"),g=z(T),M=C(),y=c("div"),b=z(h),this.h()},l(_){l=i(_,"DIV",{class:!0});var P=v(l);e=i(P,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-ukgp83"&&(e.textContent=t),f=S(P),k&&k.l(P),P.forEach(n),p=S(_),d=i(_,"DIV",{class:!0});var j=v(d);u=i(j,"DIV",{class:!0});var w=v(u);g=F(w,T),w.forEach(n),M=S(j),y=i(j,"DIV",{class:!0});var E=v(y);b=F(E,h),E.forEach(n),j.forEach(n),this.h()},h(){r(e,"class","track-icon"),r(l,"class","track-artwork svelte-1dgjsxy"),r(u,"class","track-title svelte-1dgjsxy"),r(y,"class","track-artist svelte-1dgjsxy"),r(d,"class","track-info svelte-1dgjsxy")},m(_,P){W(_,l,P),a(l,e),a(l,f),k&&k.m(l,null),W(_,p,P),W(_,d,P),a(d,u),a(u,g),a(d,M),a(d,y),a(y,b)},p(_,P){_[8]?k||(k=tt(),k.c(),k.m(l,null)):k&&(k.d(1),k=null),P[0]&4&&T!==(T=_[2].title+"")&&fe(g,T),P[0]&4&&h!==(h=_[2].artist+"")&&fe(b,h)},d(_){_&&(n(l),n(p),n(d)),k&&k.d()}}}function tt(s){let l;return{c(){l=c("div"),this.h()},l(e){l=i(e,"DIV",{class:!0}),v(l).forEach(n),this.h()},h(){r(l,"class","loading-spinner svelte-1dgjsxy")},m(e,t){W(e,l,t)},d(e){e&&n(l)}}}function Vt(s){let l,e=s[1]?"‚è∏Ô∏è":"‚ñ∂Ô∏è",t;return{c(){l=c("span"),t=z(e),this.h()},l(f){l=i(f,"SPAN",{class:!0});var p=v(l);t=F(p,e),p.forEach(n),this.h()},h(){r(l,"class","play-icon svelte-1dgjsxy")},m(f,p){W(f,l,p),a(l,t)},p(f,p){p[0]&2&&e!==(e=f[1]?"‚è∏Ô∏è":"‚ñ∂Ô∏è")&&fe(t,e)},d(f){f&&n(l)}}}function St(s){let l;return{c(){l=c("div"),this.h()},l(e){l=i(e,"DIV",{class:!0}),v(l).forEach(n),this.h()},h(){r(l,"class","loading-dot svelte-1dgjsxy")},m(e,t){W(e,l,t)},p:Ie,d(e){e&&n(l)}}}function Ct(s){let l;return{c(){l=z("üîÅ")},l(e){l=F(e,"üîÅ")},m(e,t){W(e,l,t)},d(e){e&&n(l)}}}function Lt(s){let l;return{c(){l=z("üîÅ")},l(e){l=F(e,"üîÅ")},m(e,t){W(e,l,t)},d(e){e&&n(l)}}}function Nt(s){let l;return{c(){l=z("üîÇ")},l(e){l=F(e,"üîÇ")},m(e,t){W(e,l,t)},d(e){e&&n(l)}}}function lt(s){let l,e,t,f,p=s[3].length+"",d,u,T,g,M,y,h,b,k,_,P=qe(s[3]),j=[];for(let E=0;E<P.length;E+=1)j[E]=at(et(s,P,E));let w=null;return P.length||(w=st()),{c(){l=c("div"),e=c("div"),t=c("h3"),f=z("Queue ("),d=z(p),u=z(" tracks)"),T=C(),g=c("button"),M=z("Clear All"),h=C(),b=c("div");for(let E=0;E<j.length;E+=1)j[E].c();w&&w.c(),this.h()},l(E){l=i(E,"DIV",{class:!0});var q=v(l);e=i(q,"DIV",{class:!0});var L=v(e);t=i(L,"H3",{class:!0});var O=v(t);f=F(O,"Queue ("),d=F(O,p),u=F(O," tracks)"),O.forEach(n),T=S(L),g=i(L,"BUTTON",{class:!0});var I=v(g);M=F(I,"Clear All"),I.forEach(n),L.forEach(n),h=S(q),b=i(q,"DIV",{class:!0});var Q=v(b);for(let H=0;H<j.length;H+=1)j[H].l(Q);w&&w.l(Q),Q.forEach(n),q.forEach(n),this.h()},h(){r(t,"class","svelte-1dgjsxy"),r(g,"class","clear-queue-btn svelte-1dgjsxy"),g.disabled=y=s[3].length===0,r(e,"class","queue-header svelte-1dgjsxy"),r(b,"class","queue-list svelte-1dgjsxy"),r(l,"class","queue-panel svelte-1dgjsxy")},m(E,q){W(E,l,q),a(l,e),a(e,t),a(t,f),a(t,d),a(t,u),a(e,T),a(e,g),a(g,M),a(l,h),a(l,b);for(let L=0;L<j.length;L+=1)j[L]&&j[L].m(b,null);w&&w.m(b,null),k||(_=re(g,"click",s[18]),k=!0)},p(E,q){if(q[0]&8&&p!==(p=E[3].length+"")&&fe(d,p),q[0]&8&&y!==(y=E[3].length===0)&&(g.disabled=y),q[0]&196632){P=qe(E[3]);let L;for(L=0;L<P.length;L+=1){const O=et(E,P,L);j[L]?j[L].p(O,q):(j[L]=at(O),j[L].c(),j[L].m(b,null))}for(;L<j.length;L+=1)j[L].d(1);j.length=P.length,!P.length&&w?w.p(E,q):P.length?w&&(w.d(1),w=null):(w=st(),w.c(),w.m(b,null))}},d(E){E&&n(l),vt(j,E),w&&w.d(),k=!1,_()}}}function st(s){let l,e='<p>No tracks in queue</p> <p class="queue-empty-subtitle svelte-1dgjsxy">Add some music to get started!</p> ';return{c(){l=c("div"),l.innerHTML=e,this.h()},l(t){l=i(t,"DIV",{class:!0,"data-svelte-h":!0}),_e(l)!=="svelte-1xw69eu"&&(l.innerHTML=e),this.h()},h(){r(l,"class","queue-empty svelte-1dgjsxy")},m(t,f){W(t,l,f)},p:Ie,d(t){t&&n(l)}}}function at(s){let l,e,t,f=s[44].title+"",p,d,u,T=s[44].artist+"",g,M,y,h=je(s[44].duration)+"",b,k,_,P="‚ùå",j,w,E;function q(){return s[30](s[46])}function L(){return s[31](s[46])}return{c(){l=c("div"),e=c("div"),t=c("div"),p=z(f),d=C(),u=c("div"),g=z(T),M=C(),y=c("div"),b=z(h),k=C(),_=c("button"),_.textContent=P,j=C(),this.h()},l(O){l=i(O,"DIV",{class:!0});var I=v(l);e=i(I,"DIV",{class:!0});var Q=v(e);t=i(Q,"DIV",{class:!0});var H=v(t);p=F(H,f),H.forEach(n),d=S(Q),u=i(Q,"DIV",{class:!0});var X=v(u);g=F(X,T),X.forEach(n),Q.forEach(n),M=S(I),y=i(I,"DIV",{class:!0});var le=v(y);b=F(le,h),le.forEach(n),k=S(I),_=i(I,"BUTTON",{class:!0,"data-svelte-h":!0}),_e(_)!=="svelte-njweh1"&&(_.textContent=P),j=S(I),I.forEach(n),this.h()},h(){r(t,"class","queue-track-title svelte-1dgjsxy"),r(u,"class","queue-track-artist svelte-1dgjsxy"),r(e,"class","queue-track-info svelte-1dgjsxy"),r(y,"class","queue-track-duration svelte-1dgjsxy"),r(_,"class","remove-track-btn svelte-1dgjsxy"),r(l,"class","queue-item svelte-1dgjsxy"),Z(l,"current",s[46]===s[4])},m(O,I){W(O,l,I),a(l,e),a(e,t),a(t,p),a(e,d),a(e,u),a(u,g),a(l,M),a(l,y),a(y,b),a(l,k),a(l,_),a(l,j),w||(E=[re(_,"click",bt(q)),re(l,"click",L)],w=!0)},p(O,I){s=O,I[0]&8&&f!==(f=s[44].title+"")&&fe(p,f),I[0]&8&&T!==(T=s[44].artist+"")&&fe(g,T),I[0]&8&&h!==(h=je(s[44].duration)+"")&&fe(b,h),I[0]&16&&Z(l,"current",s[46]===s[4])},d(O){O&&n(l),w=!1,it(E)}}}function qt(s){let l,e,t,f,p,d,u,T,g="üîÄ",M,y,h,b,k,_,P,j,w,E,q,L,O,I,Q,H,X,le=je(s[6])+"",ve,$,A,te,B,se,G,oe,D,J,R=je(s[7])+"",U,ie,x,ae,ne,me="üîä",ge,Y,o,N,K,he,ke,Ae,ce,Oe,De=s[3].length+"",Me,Qe,Be,Re;function Ue(m,V){return m[2]?wt:Mt}let we=Ue(s),ue=we(s);function Fe(m,V){return m[8]?St:Vt}let Ve=Fe(s),de=Ve(s);function ze(m,V){return m[10]==="one"?Nt:m[10]==="all"?Lt:Ct}let Se=ze(s),ye=Se(s),ee=s[9]&&lt(s);return{c(){l=c("audio"),e=C(),t=c("div"),f=c("div"),ue.c(),p=C(),d=c("div"),u=c("div"),T=c("button"),T.textContent=g,M=C(),y=c("button"),h=z("‚èÆÔ∏è"),k=C(),_=c("button"),de.c(),w=C(),E=c("button"),q=z("‚è≠Ô∏è"),O=C(),I=c("button"),ye.c(),Q=C(),H=c("div"),X=c("span"),ve=z(le),$=C(),A=c("div"),te=c("div"),B=C(),se=c("div"),G=C(),oe=c("div"),D=C(),J=c("span"),U=z(R),ie=C(),x=c("div"),ae=c("div"),ne=c("span"),ne.textContent=me,ge=C(),Y=c("div"),o=c("div"),N=C(),K=c("div"),he=C(),ke=c("div"),Ae=C(),ce=c("button"),Oe=z("üìã "),Me=z(De),Qe=C(),ee&&ee.c(),this.h()},l(m){l=i(m,"AUDIO",{preload:!0}),v(l).forEach(n),e=S(m),t=i(m,"DIV",{class:!0});var V=v(t);f=i(V,"DIV",{class:!0});var Xe=v(f);ue.l(Xe),Xe.forEach(n),p=S(V),d=i(V,"DIV",{class:!0});var Ce=v(d);u=i(Ce,"DIV",{class:!0});var pe=v(u);T=i(pe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),_e(T)!=="svelte-12ir8o1"&&(T.textContent=g),M=S(pe),y=i(pe,"BUTTON",{class:!0,title:!0});var Ge=v(y);h=F(Ge,"‚èÆÔ∏è"),Ge.forEach(n),k=S(pe),_=i(pe,"BUTTON",{class:!0,title:!0});var Je=v(_);de.l(Je),Je.forEach(n),w=S(pe),E=i(pe,"BUTTON",{class:!0,title:!0});var Ke=v(E);q=F(Ke,"‚è≠Ô∏è"),Ke.forEach(n),O=S(pe),I=i(pe,"BUTTON",{class:!0,title:!0});var We=v(I);ye.l(We),We.forEach(n),pe.forEach(n),Q=S(Ce),H=i(Ce,"DIV",{class:!0});var Ee=v(H);X=i(Ee,"SPAN",{class:!0});var Ye=v(X);ve=F(Ye,le),Ye.forEach(n),$=S(Ee),A=i(Ee,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var Te=v(A);te=i(Te,"DIV",{class:!0}),v(te).forEach(n),B=S(Te),se=i(Te,"DIV",{class:!0,style:!0}),v(se).forEach(n),G=S(Te),oe=i(Te,"DIV",{class:!0,style:!0}),v(oe).forEach(n),Te.forEach(n),D=S(Ee),J=i(Ee,"SPAN",{class:!0});var Ze=v(J);U=F(Ze,R),Ze.forEach(n),Ee.forEach(n),Ce.forEach(n),ie=S(V),x=i(V,"DIV",{class:!0});var Le=v(x);ae=i(Le,"DIV",{class:!0});var Ne=v(ae);ne=i(Ne,"SPAN",{class:!0,"data-svelte-h":!0}),_e(ne)!=="svelte-12kgbbu"&&(ne.textContent=me),ge=S(Ne),Y=i(Ne,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var Pe=v(Y);o=i(Pe,"DIV",{class:!0}),v(o).forEach(n),N=S(Pe),K=i(Pe,"DIV",{class:!0,style:!0}),v(K).forEach(n),he=S(Pe),ke=i(Pe,"DIV",{class:!0,style:!0}),v(ke).forEach(n),Pe.forEach(n),Ne.forEach(n),Ae=S(Le),ce=i(Le,"BUTTON",{class:!0,title:!0});var He=v(ce);Oe=F(He,"üìã "),Me=F(He,De),He.forEach(n),Le.forEach(n),Qe=S(V),ee&&ee.l(V),V.forEach(n),this.h()},h(){r(l,"preload","metadata"),r(f,"class","current-track svelte-1dgjsxy"),r(T,"class","control-btn svelte-1dgjsxy"),r(T,"title","Shuffle"),Z(T,"active",s[11]),r(y,"class","control-btn svelte-1dgjsxy"),y.disabled=b=!s[2],r(y,"title","Previous"),r(_,"class","play-pause-btn svelte-1dgjsxy"),_.disabled=P=!s[2],r(_,"title",j=s[1]?"Pause":"Play"),Z(_,"loading",s[8]),r(E,"class","control-btn svelte-1dgjsxy"),E.disabled=L=!s[2],r(E,"title","Next"),r(I,"class","control-btn svelte-1dgjsxy"),r(I,"title","Repeat"),Z(I,"active",s[10]!=="none"),r(u,"class","control-buttons svelte-1dgjsxy"),r(X,"class","time-display svelte-1dgjsxy"),r(te,"class","progress-track svelte-1dgjsxy"),r(se,"class","progress-fill svelte-1dgjsxy"),be(se,"width",(s[7]?s[6]/s[7]*100:0)+"%"),r(oe,"class","progress-handle svelte-1dgjsxy"),be(oe,"left",(s[7]?s[6]/s[7]*100:0)+"%"),r(A,"class","progress-bar svelte-1dgjsxy"),r(A,"role","slider"),r(A,"tabindex","0"),r(A,"aria-label","Track progress"),r(J,"class","time-display svelte-1dgjsxy"),r(H,"class","progress-container svelte-1dgjsxy"),r(d,"class","player-controls svelte-1dgjsxy"),r(ne,"class","volume-icon svelte-1dgjsxy"),r(o,"class","volume-track svelte-1dgjsxy"),r(K,"class","volume-fill svelte-1dgjsxy"),be(K,"width",s[5]*100+"%"),r(ke,"class","volume-handle svelte-1dgjsxy"),be(ke,"left",s[5]*100+"%"),r(Y,"class","volume-bar svelte-1dgjsxy"),r(Y,"role","slider"),r(Y,"tabindex","0"),r(Y,"aria-label","Volume"),r(ae,"class","volume-control svelte-1dgjsxy"),r(ce,"class","queue-btn svelte-1dgjsxy"),r(ce,"title","Queue"),Z(ce,"active",s[9]),r(x,"class","player-extras svelte-1dgjsxy"),r(t,"class","music-player svelte-1dgjsxy"),Z(t,"loaded",s[12]),Z(t,"playing",s[1])},m(m,V){W(m,l,V),s[29](l),W(m,e,V),W(m,t,V),a(t,f),ue.m(f,null),a(t,p),a(t,d),a(d,u),a(u,T),a(u,M),a(u,y),a(y,h),a(u,k),a(u,_),de.m(_,null),a(u,w),a(u,E),a(E,q),a(u,O),a(u,I),ye.m(I,null),a(d,Q),a(d,H),a(H,X),a(X,ve),a(H,$),a(H,A),a(A,te),a(A,B),a(A,se),a(A,G),a(A,oe),a(H,D),a(H,J),a(J,U),a(t,ie),a(t,x),a(x,ae),a(ae,ne),a(ae,ge),a(ae,Y),a(Y,o),a(Y,N),a(Y,K),a(Y,he),a(Y,ke),a(x,Ae),a(x,ce),a(ce,Oe),a(ce,Me),a(t,Qe),ee&&ee.m(t,null),Be||(Re=[re(T,"click",s[24]),re(y,"click",s[15]),re(_,"click",s[13]),re(E,"click",s[14]),re(I,"click",s[23]),re(A,"click",s[19]),re(A,"mousedown",s[20]),re(A,"mouseup",s[21]),re(Y,"click",s[22]),re(ce,"click",s[25])],Be=!0)},p(m,V){we===(we=Ue(m))&&ue?ue.p(m,V):(ue.d(1),ue=we(m),ue&&(ue.c(),ue.m(f,null))),V[0]&2048&&Z(T,"active",m[11]),V[0]&4&&b!==(b=!m[2])&&(y.disabled=b),Ve===(Ve=Fe(m))&&de?de.p(m,V):(de.d(1),de=Ve(m),de&&(de.c(),de.m(_,null))),V[0]&4&&P!==(P=!m[2])&&(_.disabled=P),V[0]&2&&j!==(j=m[1]?"Pause":"Play")&&r(_,"title",j),V[0]&256&&Z(_,"loading",m[8]),V[0]&4&&L!==(L=!m[2])&&(E.disabled=L),Se!==(Se=ze(m))&&(ye.d(1),ye=Se(m),ye&&(ye.c(),ye.m(I,null))),V[0]&1024&&Z(I,"active",m[10]!=="none"),V[0]&64&&le!==(le=je(m[6])+"")&&fe(ve,le),V[0]&192&&be(se,"width",(m[7]?m[6]/m[7]*100:0)+"%"),V[0]&192&&be(oe,"left",(m[7]?m[6]/m[7]*100:0)+"%"),V[0]&128&&R!==(R=je(m[7])+"")&&fe(U,R),V[0]&32&&be(K,"width",m[5]*100+"%"),V[0]&32&&be(ke,"left",m[5]*100+"%"),V[0]&8&&De!==(De=m[3].length+"")&&fe(Me,De),V[0]&512&&Z(ce,"active",m[9]),m[9]?ee?ee.p(m,V):(ee=lt(m),ee.c(),ee.m(t,null)):ee&&(ee.d(1),ee=null),V[0]&4096&&Z(t,"loaded",m[12]),V[0]&2&&Z(t,"playing",m[1])},i:Ie,o:Ie,d(m){m&&(n(l),n(e),n(t)),s[29](null),ue.d(),de.d(),ye.d(),ee&&ee.d(),Be=!1,it(Re)}}}function je(s){if(!s||isNaN(s))return"0:00";const l=Math.floor(s/60),e=Math.floor(s%60);return`${l}:${e.toString().padStart(2,"0")}`}function At(s,l,e){let t,f=!1,p=null,d=[],u=0,T=.8,g=0,M=0,y=!1,h=!1,b="none",k=!1,_=!1,P=!1;ct(()=>{console.log("üéµ MusicPlayer: Component mounted"),e(12,_=!0),ie(),t?(console.log("üîä MusicPlayer: Setting up audio event listeners"),t.addEventListener("loadstart",j),t.addEventListener("loadeddata",w),t.addEventListener("canplay",E),t.addEventListener("timeupdate",q),t.addEventListener("ended",L),t.addEventListener("error",O)):console.warn("‚ö†Ô∏è MusicPlayer: Audio element not available on mount")}),ht(()=>{t&&(t.removeEventListener("loadstart",j),t.removeEventListener("loadeddata",w),t.removeEventListener("canplay",E),t.removeEventListener("timeupdate",q),t.removeEventListener("ended",L),t.removeEventListener("error",O))});function j(){e(8,y=!0)}function w(){e(7,M=t.duration||0)}function E(){e(8,y=!1)}function q(){P||e(6,g=t.currentTime||0)}function L(){X()}function O(o){console.error("üö® MusicPlayer: Audio error occurred:",o),console.error("üö® MusicPlayer: Current audio src:",t==null?void 0:t.src),console.error("üö® MusicPlayer: Current track:",p),e(8,y=!1),e(1,f=!1)}async function I(){if(console.log("‚èØÔ∏è MusicPlayer: togglePlayPause called, isPlaying:",f,"currentTrack:",p),!p){console.warn("‚ö†Ô∏è MusicPlayer: No current track to toggle");return}f?await H():await Q()}async function Q(o=null){if(console.log("‚ñ∂Ô∏è MusicPlayer: playTrack called with:",o),o&&(console.log("üîó MusicPlayer: Setting audio source to:",o.stream_url),e(2,p=o),e(0,t.src=o.stream_url,t)),!t.src){console.warn("‚ö†Ô∏è MusicPlayer: No audio source available");return}try{console.log("üéß MusicPlayer: Starting playback..."),e(8,y=!0),await t.play(),e(1,f=!0),console.log("‚úÖ MusicPlayer: Playback started successfully"),p&&(console.log("üì° MusicPlayer: Notifying backend of playback"),await fetch(`/api/v1/player/play/${p.id}`,{method:"POST"}))}catch(N){console.error("‚ùå MusicPlayer: Failed to play track:",N),console.error("‚ùå MusicPlayer: Audio src was:",t.src),e(1,f=!1)}finally{e(8,y=!1)}}async function H(){t&&(t.pause(),e(1,f=!1),await fetch("/api/v1/player/pause",{method:"POST"}))}async function X(){if(d.length===0)return;k?e(4,u=Math.floor(Math.random()*d.length)):e(4,u=(u+1)%d.length);const o=d[u];o&&(await Q(o),await fetch("/api/v1/player/next",{method:"POST"}))}async function le(){if(d.length!==0){if(g>3)e(0,t.currentTime=0,t);else{e(4,u=u===0?d.length-1:u-1);const o=d[u];o&&await Q(o)}await fetch("/api/v1/player/previous",{method:"POST"})}}function ve(o){e(3,d=[...d,o]),B()}function $(o){e(3,d=d.filter((N,K)=>K!==o)),u>=o&&u>0&&e(4,u--,u),B()}function A(o){e(4,u=o);const N=d[o];N&&Q(N)}function te(){e(3,d=[]),e(4,u=0),B()}async function B(){try{await fetch("/api/v1/player/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queue:d,currentIndex:u})})}catch(o){console.error("Failed to update queue:",o)}}function se(o){if(!t||!M)return;const N=o.currentTarget.getBoundingClientRect(),he=(o.clientX-N.left)/N.width*M;e(0,t.currentTime=he,t),e(6,g=he)}function G(o){P=!0;const N=o.currentTarget.getBoundingClientRect(),K=Math.max(0,Math.min(1,(o.clientX-N.left)/N.width));e(6,g=K*M)}function oe(){t&&P&&(e(0,t.currentTime=g,t),P=!1)}function D(o){const N=o.currentTarget.getBoundingClientRect(),K=Math.max(0,Math.min(1,(o.clientX-N.left)/N.width));e(5,T=K),t&&e(0,t.volume=T,t)}function J(){const o=["none","one","all"],N=o.indexOf(b);e(10,b=o[(N+1)%o.length])}function R(){e(11,k=!k)}function U(){e(9,h=!h)}async function ie(){try{const N=await(await fetch("/api/v1/player/current")).json();N.success&&N.current_track&&(e(2,p=N.current_track),e(1,f=N.is_playing),e(6,g=N.position||0));const he=await(await fetch("/api/v1/player/queue")).json();he.success&&(e(3,d=he.queue||[]),e(4,u=he.current_index||0))}catch(o){console.error("Failed to load player state:",o)}}function x(o){console.log("üéµ MusicPlayer: playTrackFromParent called with track:",o),Q(o)}function ae(o){console.log("üìù MusicPlayer: addTrackToQueue called with track:",o),ve(o)}function ne(o,N=0){console.log("üéº MusicPlayer: setQueue called with",o.length,"tracks, startIndex:",N),e(3,d=[...o]),e(4,u=N),o.length>0&&(console.log("üéº MusicPlayer: Starting playback of track:",o[N]),Q(o[N])),B()}function me(o){ut[o?"unshift":"push"](()=>{t=o,e(0,t)})}return[t,f,p,d,u,T,g,M,y,h,b,k,_,I,X,le,$,A,te,se,G,oe,D,J,R,U,x,ae,ne,me,o=>$(o),o=>A(o)]}class Ot extends dt{constructor(l){super(),ft(this,l,At,qt,ot,{playTrackFromParent:26,addTrackToQueue:27,setQueue:28},null,[-1,-1])}get playTrackFromParent(){return this.$$.ctx[26]}get addTrackToQueue(){return this.$$.ctx[27]}get setQueue(){return this.$$.ctx[28]}}function rt(s,l,e){const t=s.slice();return t[9]=l[e],t}function nt(s){let l,e,t,f=s[9].icon+"",p,d,u,T=s[9].label+"",g,M,y;return{c(){l=c("li"),e=c("a"),t=c("span"),p=z(f),d=C(),u=c("span"),g=z(T),y=C(),this.h()},l(h){l=i(h,"LI",{class:!0});var b=v(l);e=i(b,"A",{href:!0,class:!0,"aria-current":!0});var k=v(e);t=i(k,"SPAN",{class:!0,"aria-hidden":!0});var _=v(t);p=F(_,f),_.forEach(n),d=S(k),u=i(k,"SPAN",{class:!0});var P=v(u);g=F(P,T),P.forEach(n),k.forEach(n),y=S(b),b.forEach(n),this.h()},h(){r(t,"class","nav-icon svelte-iyd11m"),r(t,"aria-hidden","true"),r(u,"class","nav-label svelte-iyd11m"),r(e,"href",s[9].href),r(e,"class","nav-link svelte-iyd11m"),r(e,"aria-current",M=s[3]===s[9].href?"page":void 0),Z(e,"active",s[3]===s[9].href),r(l,"class","nav-item")},m(h,b){W(h,l,b),a(l,e),a(e,t),a(t,p),a(e,d),a(e,u),a(u,g),a(l,y)},p(h,b){b&8&&M!==(M=h[3]===h[9].href?"page":void 0)&&r(e,"aria-current",M),b&24&&Z(e,"active",h[3]===h[9].href)},d(h){h&&n(l)}}}function Qt(s){let l,e,t,f,p,d,u='<h1 class="brand-title svelte-iyd11m"><span class="brand-icon svelte-iyd11m">ü§ñ</span> <span class="brand-text svelte-iyd11m">StepheyBot</span> <span class="brand-subtitle svelte-iyd11m">Music</span></h1>',T,g,M,y,h,b,k,_="System Time",P,j,w,E,q,L='<div class="pulse-dot svelte-iyd11m"></div> <span class="status-text svelte-iyd11m">Online</span>',O,I,Q,H,X,le=`<div class="container"><div class="footer-content svelte-iyd11m"><div class="footer-info"><p class="footer-text svelte-iyd11m">Powered by <span class="text-neon-cyan">StepheyBot AI</span> ‚Ä¢
						Built with <span class="text-neon-pink">Svelte</span> &amp;
						<span class="text-neon-purple">Rust</span></p></div> <div class="footer-links svelte-iyd11m"><a href="/health" class="footer-link svelte-iyd11m">System Health</a> <a href="/api/v1/status" class="footer-link svelte-iyd11m">API Status</a> <a href="https://github.com/RM-Stephey/stepheybot-music" class="footer-link svelte-iyd11m" target="_blank" rel="noopener noreferrer">GitHub</a></div></div></div>`,ve,$,A,te=qe(s[4]),B=[];for(let D=0;D<te.length;D+=1)B[D]=nt(rt(s,te,D));const se=s[7].default,G=pt(se,s,s[6],null);let oe={};return $=new Ot({props:oe}),s[8]($),{c(){l=C(),e=c("div"),t=c("header"),f=c("div"),p=c("div"),d=c("div"),d.innerHTML=u,T=C(),g=c("nav"),M=c("ul");for(let D=0;D<B.length;D+=1)B[D].c();y=C(),h=c("div"),b=c("div"),k=c("span"),k.textContent=_,P=C(),j=c("span"),w=z(s[2]),E=C(),q=c("div"),q.innerHTML=L,O=C(),I=c("main"),Q=c("div"),G&&G.c(),H=C(),X=c("footer"),X.innerHTML=le,ve=C(),jt($.$$.fragment),this.h()},l(D){Tt("svelte-lzmi55",document.head).forEach(n),l=S(D),e=i(D,"DIV",{class:!0});var R=v(e);t=i(R,"HEADER",{class:!0});var U=v(t);f=i(U,"DIV",{class:!0});var ie=v(f);p=i(ie,"DIV",{class:!0});var x=v(p);d=i(x,"DIV",{class:!0,"data-svelte-h":!0}),_e(d)!=="svelte-1frejdu"&&(d.innerHTML=u),T=S(x),g=i(x,"NAV",{class:!0,"aria-label":!0});var ae=v(g);M=i(ae,"UL",{class:!0});var ne=v(M);for(let K=0;K<B.length;K+=1)B[K].l(ne);ne.forEach(n),ae.forEach(n),y=S(x),h=i(x,"DIV",{class:!0});var me=v(h);b=i(me,"DIV",{class:!0});var ge=v(b);k=i(ge,"SPAN",{class:!0,"data-svelte-h":!0}),_e(k)!=="svelte-jz1u7g"&&(k.textContent=_),P=S(ge),j=i(ge,"SPAN",{class:!0});var Y=v(j);w=F(Y,s[2]),Y.forEach(n),ge.forEach(n),E=S(me),q=i(me,"DIV",{class:!0,"data-svelte-h":!0}),_e(q)!=="svelte-m1i8io"&&(q.innerHTML=L),me.forEach(n),x.forEach(n),ie.forEach(n),U.forEach(n),O=S(R),I=i(R,"MAIN",{class:!0});var o=v(I);Q=i(o,"DIV",{class:!0});var N=v(Q);G&&G.l(N),N.forEach(n),o.forEach(n),H=S(R),X=i(R,"FOOTER",{class:!0,"data-svelte-h":!0}),_e(X)!=="svelte-1t6ebqa"&&(X.innerHTML=le),ve=S(R),Pt($.$$.fragment,R),R.forEach(n),this.h()},h(){document.title="StepheyBot Music - AI-Powered Music Recommendations",r(d,"class","brand svelte-iyd11m"),r(M,"class","nav-list svelte-iyd11m"),r(g,"class","nav"),r(g,"aria-label","Main navigation"),r(k,"class","status-label svelte-iyd11m"),r(j,"class","status-value text-glow svelte-iyd11m"),r(b,"class","status-time svelte-iyd11m"),r(q,"class","status-indicator svelte-iyd11m"),r(h,"class","status-info svelte-iyd11m"),r(p,"class","header-content svelte-iyd11m"),r(f,"class","container"),r(t,"class","header svelte-iyd11m"),r(Q,"class","content-wrapper svelte-iyd11m"),r(I,"class","main-content svelte-iyd11m"),r(X,"class","footer svelte-iyd11m"),r(e,"class","app-layout svelte-iyd11m"),Z(e,"loaded",s[1])},m(D,J){W(D,l,J),W(D,e,J),a(e,t),a(t,f),a(f,p),a(p,d),a(p,T),a(p,g),a(g,M);for(let R=0;R<B.length;R+=1)B[R]&&B[R].m(M,null);a(p,y),a(p,h),a(h,b),a(b,k),a(b,P),a(b,j),a(j,w),a(h,E),a(h,q),a(e,O),a(e,I),a(I,Q),G&&G.m(Q,null),a(e,H),a(e,X),a(e,ve),Et($,e,null),A=!0},p(D,[J]){if(J&24){te=qe(D[4]);let U;for(U=0;U<te.length;U+=1){const ie=rt(D,te,U);B[U]?B[U].p(ie,J):(B[U]=nt(ie),B[U].c(),B[U].m(M,null))}for(;U<B.length;U+=1)B[U].d(1);B.length=te.length}(!A||J&4)&&fe(w,D[2]),G&&G.p&&(!A||J&64)&&_t(G,se,D,D[6],A?gt(se,D[6],J,null):mt(D[6]),null);const R={};$.$set(R),(!A||J&2)&&Z(e,"loaded",D[1])},i(D){A||($e(G,D),$e($.$$.fragment,D),A=!0)},o(D){xe(G,D),xe($.$$.fragment,D),A=!1},d(D){D&&(n(l),n(e)),vt(B,D),G&&G.d(D),s[8](null),kt($)}}}function Bt(s,l,e){let t,f;yt(s,It,h=>e(5,f=h));let{$$slots:p={},$$scope:d}=l,u=!1,T=new Date().toLocaleTimeString(),g;ct(()=>{e(1,u=!0);const h=setInterval(()=>{e(2,T=new Date().toLocaleTimeString())},1e3);return()=>clearInterval(h)});const M=[{href:"/",label:"Dashboard",icon:"üè†"},{href:"/recommendations",label:"Recommendations",icon:"üéµ"},{href:"/discover",label:"Discover",icon:"üîç"},{href:"/playlists",label:"Playlists",icon:"üìù"},{href:"/library",label:"Library",icon:"üìö"},{href:"/stats",label:"Stats",icon:"üìä"}];function y(h){ut[h?"unshift":"push"](()=>{g=h,e(0,g)})}return s.$$set=h=>{"$$scope"in h&&e(6,d=h.$$scope)},s.$$.update=()=>{s.$$.dirty&1&&g&&Dt(g),s.$$.dirty&32&&e(3,t=f.url.pathname)},[g,u,T,t,M,f,d,p,y]}class zt extends dt{constructor(l){super(),ft(this,l,Bt,Qt,ot,{})}}export{zt as component};
