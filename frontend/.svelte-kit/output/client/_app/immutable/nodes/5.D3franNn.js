import{s as it,n as we,r as De,o as rt,e as Ee}from"../chunks/DP8VM1Me.js";import{S as ot,i as ut,d,l as v,D as ue,k as ie,a as y,b as u,o as ee,c as k,e as P,n as H,g as O,h as w,j as M,E as ge,F as Se,f as T,t as D,s as X,p as ft,x as de,z as dt,r as _t,u as ht,B as pt,m as vt,C as bt,A as mt}from"../chunks/DOSGr0tm.js";import{e as Ne}from"../chunks/D6YF6ztN.js";import{m as ke}from"../chunks/CY0B7flr.js";function Pe(l,e,t){const s=l.slice();return s[51]=e[t],s}function Te(l){const e=l.slice(),t=e[28](e[51]);return e[55]=t,e}function gt(l){const e=l.slice(),t=e[20](e[51]);e[54]=t;const s=e[19](e[51]);return e[56]=s,e}function kt(l){const e=l.slice(),t=e[27](e[51]);return e[54]=t,e}function Ie(l){let e,t="‚úï",s,i;return{c(){e=w("button"),e.textContent=t,this.h()},l(a){e=k(a,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-s3b2um"&&(e.textContent=t),this.h()},h(){v(e,"class","clear-search-btn svelte-7n2d85")},m(a,n){y(a,e,n),s||(i=ee(e,"click",l[21]),s=!0)},p:we,d(a){a&&d(e),s=!1,i()}}}function qe(l){let e,t='<div class="loading-spinner svelte-7n2d85"></div>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1d1wf6a"&&(e.innerHTML=t),this.h()},h(){v(e,"class","search-loading svelte-7n2d85")},m(s,i){y(s,e,i)},d(s){s&&d(e)}}}function wt(l){let e;return{c(){e=D("Search")},l(t){e=T(t,"Search")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function Ct(l){let e;return{c(){e=D("Searching...")},l(t){e=T(t,"Searching...")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function Oe(l){let e,t,s,i="Search Type:",a,n,r,c="All Sources",_,f="Local Only",h,m="External Only",o,p,g,C="Search for:",z,R,Y,re="Everything",G,V="Artists",U,ce="Albums",x,Z="Tracks",J,F,j,B="Sort by:",N,I,te,ae="Relevance",K,W="Popularity",Q,me="Year",ne,fe="Duration",se,E;return{c(){e=w("div"),t=w("div"),s=w("label"),s.textContent=i,a=M(),n=w("select"),r=w("option"),r.textContent=c,_=w("option"),_.textContent=f,h=w("option"),h.textContent=m,o=M(),p=w("div"),g=w("label"),g.textContent=C,z=M(),R=w("select"),Y=w("option"),Y.textContent=re,G=w("option"),G.textContent=V,U=w("option"),U.textContent=ce,x=w("option"),x.textContent=Z,J=M(),F=w("div"),j=w("label"),j.textContent=B,N=M(),I=w("select"),te=w("option"),te.textContent=ae,K=w("option"),K.textContent=W,Q=w("option"),Q.textContent=me,ne=w("option"),ne.textContent=fe,this.h()},l(A){e=k(A,"DIV",{class:!0});var $=P(e);t=k($,"DIV",{class:!0});var he=P(t);s=k(he,"LABEL",{class:!0,"data-svelte-h":!0}),H(s)!=="svelte-ihfsv2"&&(s.textContent=i),a=O(he),n=k(he,"SELECT",{class:!0});var pe=P(n);r=k(pe,"OPTION",{"data-svelte-h":!0}),H(r)!=="svelte-14aecnw"&&(r.textContent=c),_=k(pe,"OPTION",{"data-svelte-h":!0}),H(_)!=="svelte-x3k7z8"&&(_.textContent=f),h=k(pe,"OPTION",{"data-svelte-h":!0}),H(h)!=="svelte-1l12pru"&&(h.textContent=m),pe.forEach(d),he.forEach(d),o=O($),p=k($,"DIV",{class:!0});var ve=P(p);g=k(ve,"LABEL",{class:!0,"data-svelte-h":!0}),H(g)!=="svelte-k2mh45"&&(g.textContent=C),z=O(ve),R=k(ve,"SELECT",{class:!0});var le=P(R);Y=k(le,"OPTION",{"data-svelte-h":!0}),H(Y)!=="svelte-1ac8m16"&&(Y.textContent=re),G=k(le,"OPTION",{"data-svelte-h":!0}),H(G)!=="svelte-4hq49l"&&(G.textContent=V),U=k(le,"OPTION",{"data-svelte-h":!0}),H(U)!=="svelte-149aohn"&&(U.textContent=ce),x=k(le,"OPTION",{"data-svelte-h":!0}),H(x)!=="svelte-160u72j"&&(x.textContent=Z),le.forEach(d),ve.forEach(d),J=O($),F=k($,"DIV",{class:!0});var oe=P(F);j=k(oe,"LABEL",{class:!0,"data-svelte-h":!0}),H(j)!=="svelte-1a61m3p"&&(j.textContent=B),N=O(oe),I=k(oe,"SELECT",{class:!0});var _e=P(I);te=k(_e,"OPTION",{"data-svelte-h":!0}),H(te)!=="svelte-s2j5o8"&&(te.textContent=ae),K=k(_e,"OPTION",{"data-svelte-h":!0}),H(K)!=="svelte-fjof4u"&&(K.textContent=W),Q=k(_e,"OPTION",{"data-svelte-h":!0}),H(Q)!=="svelte-1f4f6ga"&&(Q.textContent=me),ne=k(_e,"OPTION",{"data-svelte-h":!0}),H(ne)!=="svelte-jl9efy"&&(ne.textContent=fe),_e.forEach(d),oe.forEach(d),$.forEach(d),this.h()},h(){v(s,"class","filter-label svelte-7n2d85"),r.__value="global",ue(r,r.__value),_.__value="local",ue(_,_.__value),h.__value="external",ue(h,h.__value),v(n,"class","filter-select svelte-7n2d85"),l[7]===void 0&&Ee(()=>l[30].call(n)),v(t,"class","filter-group svelte-7n2d85"),v(g,"class","filter-label svelte-7n2d85"),Y.__value="all",ue(Y,Y.__value),G.__value="artist",ue(G,G.__value),U.__value="album",ue(U,U.__value),x.__value="track",ue(x,x.__value),v(R,"class","filter-select svelte-7n2d85"),l[8]===void 0&&Ee(()=>l[31].call(R)),v(p,"class","filter-group svelte-7n2d85"),v(j,"class","filter-label svelte-7n2d85"),te.__value="relevance",ue(te,te.__value),K.__value="popularity",ue(K,K.__value),Q.__value="year",ue(Q,Q.__value),ne.__value="duration",ue(ne,ne.__value),v(I,"class","filter-select svelte-7n2d85"),l[9]===void 0&&Ee(()=>l[32].call(I)),v(F,"class","filter-group svelte-7n2d85"),v(e,"class","search-filters svelte-7n2d85")},m(A,$){y(A,e,$),u(e,t),u(t,s),u(t,a),u(t,n),u(n,r),u(n,_),u(n,h),ge(n,l[7],!0),u(e,o),u(e,p),u(p,g),u(p,z),u(p,R),u(R,Y),u(R,G),u(R,U),u(R,x),ge(R,l[8],!0),u(e,J),u(e,F),u(F,j),u(F,N),u(F,I),u(I,te),u(I,K),u(I,Q),u(I,ne),ge(I,l[9],!0),se||(E=[ee(n,"change",l[30]),ee(n,"change",l[22]),ee(R,"change",l[31]),ee(R,"change",l[23]),ee(I,"change",l[32]),ee(I,"change",l[24])],se=!0)},p(A,$){$[0]&128&&ge(n,A[7]),$[0]&256&&ge(R,A[8]),$[0]&512&&ge(I,A[9])},d(A){A&&d(e),se=!1,De(E)}}}function yt(l){let e,t=`<span class="help-icon svelte-7n2d85">üí°</span> <h3 class="svelte-7n2d85">Start Searching</h3> <p>Enter at least 2 characters to search for music across your
                    library and external sources.</p>`;return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-heud2i"&&(e.innerHTML=t),this.h()},h(){v(e,"class","search-help svelte-7n2d85")},m(s,i){y(s,e,i)},p:we,d(s){s&&d(e)}}}function Et(l){let e,t,s="üîç",i,a,n="No Results Found",r,c,_,f,h;return{c(){e=w("div"),t=w("span"),t.textContent=s,i=M(),a=w("h3"),a.textContent=n,r=M(),c=w("p"),_=D('No tracks found for "'),f=D(l[3]),h=D(`". Try different keywords
                    or check external sources.`),this.h()},l(m){e=k(m,"DIV",{class:!0});var o=P(e);t=k(o,"SPAN",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-simyq5"&&(t.textContent=s),i=O(o),a=k(o,"H3",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-16cn29t"&&(a.textContent=n),r=O(o),c=k(o,"P",{});var p=P(c);_=T(p,'No tracks found for "'),f=T(p,l[3]),h=T(p,`". Try different keywords
                    or check external sources.`),p.forEach(d),o.forEach(d),this.h()},h(){v(t,"class","no-results-icon svelte-7n2d85"),v(a,"class","svelte-7n2d85"),v(e,"class","no-results svelte-7n2d85")},m(m,o){y(m,e,o),u(e,t),u(e,i),u(e,a),u(e,r),u(e,c),u(c,_),u(c,f),u(c,h)},p(m,o){o[0]&8&&X(f,m[3])},d(m){m&&d(e)}}}function St(l){let e,t,s,i=l[4].length+"",a,n,r,c,_=`<span class="legend-item svelte-7n2d85"><span class="source-badge local svelte-7n2d85">Local</span>
                        Available in library</span> <span class="legend-item svelte-7n2d85"><span class="source-badge external svelte-7n2d85">External</span>
                        Can be downloaded</span>`,f,h,m=Ne(l[4]),o=[];for(let p=0;p<m.length;p+=1)o[p]=nt(Pe(l,m,p));return{c(){e=w("div"),t=w("h3"),s=D("Search Results ("),a=D(i),n=D(")"),r=M(),c=w("div"),c.innerHTML=_,f=M(),h=w("div");for(let p=0;p<o.length;p+=1)o[p].c();this.h()},l(p){e=k(p,"DIV",{class:!0});var g=P(e);t=k(g,"H3",{class:!0});var C=P(t);s=T(C,"Search Results ("),a=T(C,i),n=T(C,")"),C.forEach(d),r=O(g),c=k(g,"DIV",{class:!0,"data-svelte-h":!0}),H(c)!=="svelte-ndcegg"&&(c.innerHTML=_),g.forEach(d),f=O(p),h=k(p,"DIV",{class:!0});var z=P(h);for(let R=0;R<o.length;R+=1)o[R].l(z);z.forEach(d),this.h()},h(){v(t,"class","svelte-7n2d85"),v(c,"class","results-legend svelte-7n2d85"),v(e,"class","results-header svelte-7n2d85"),v(h,"class","results-grid svelte-7n2d85")},m(p,g){y(p,e,g),u(e,t),u(t,s),u(t,a),u(t,n),u(e,r),u(e,c),y(p,f,g),y(p,h,g);for(let C=0;C<o.length;C+=1)o[C]&&o[C].m(h,null)},p(p,g){if(g[0]&16&&i!==(i=p[4].length+"")&&X(a,i),g[0]&505405456){m=Ne(p[4]);let C;for(C=0;C<m.length;C+=1){const z=Pe(p,m,C);o[C]?o[C].p(z,g):(o[C]=nt(z),o[C].c(),o[C].m(h,null))}for(;C<o.length;C+=1)o[C].d(1);o.length=m.length}},d(p){p&&(d(e),d(f),d(h)),ft(o,p)}}}function Tt(l){let e,t,s="‚ö†Ô∏è",i,a,n,r,c,_="Retry Search",f,h;return{c(){e=w("div"),t=w("span"),t.textContent=s,i=M(),a=w("p"),n=D(l[6]),r=M(),c=w("button"),c.textContent=_,this.h()},l(m){e=k(m,"DIV",{class:!0});var o=P(e);t=k(o,"SPAN",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-afr8fm"&&(t.textContent=s),i=O(o),a=k(o,"P",{});var p=P(a);n=T(p,l[6]),p.forEach(d),r=O(o),c=k(o,"BUTTON",{class:!0,"data-svelte-h":!0}),H(c)!=="svelte-163ltja"&&(c.textContent=_),o.forEach(d),this.h()},h(){v(t,"class","error-icon svelte-7n2d85"),v(c,"class","retry-btn svelte-7n2d85"),v(e,"class","error-message svelte-7n2d85")},m(m,o){y(m,e,o),u(e,t),u(e,i),u(e,a),u(a,n),u(e,r),u(e,c),f||(h=ee(c,"click",l[33]),f=!0)},p(m,o){o[0]&64&&X(n,m[6])},d(m){m&&d(e),f=!1,h()}}}function Me(l){let e,t,s=l[51].year+"",i;return{c(){e=w("span"),t=D("üìÖ "),i=D(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var n=P(e);t=T(n,"üìÖ "),i=T(n,s),n.forEach(d),this.h()},h(){v(e,"class","meta-item svelte-7n2d85")},m(a,n){y(a,e,n),u(e,t),u(e,i)},p(a,n){n[0]&16&&s!==(s=a[51].year+"")&&X(i,s)},d(a){a&&d(e)}}}function Ae(l){let e,t,s=at(l[51].duration)+"",i;return{c(){e=w("span"),t=D("‚è±Ô∏è "),i=D(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var n=P(e);t=T(n,"‚è±Ô∏è "),i=T(n,s),n.forEach(d),this.h()},h(){v(e,"class","meta-item svelte-7n2d85")},m(a,n){y(a,e,n),u(e,t),u(e,i)},p(a,n){n[0]&16&&s!==(s=at(a[51].duration)+"")&&X(i,s)},d(a){a&&d(e)}}}function Be(l){let e,t,s=l[51].genre+"",i;return{c(){e=w("span"),t=D("üéµ "),i=D(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var n=P(e);t=T(n,"üéµ "),i=T(n,s),n.forEach(d),this.h()},h(){v(e,"class","meta-item genre svelte-7n2d85")},m(a,n){y(a,e,n),u(e,t),u(e,i)},p(a,n){n[0]&16&&s!==(s=a[51].genre+"")&&X(i,s)},d(a){a&&d(e)}}}function ze(l){let e,t,s,i=l[51].quality&&Ve(l),a=l[51].size_mb&&Le(l),n=l[51].seeders!==void 0&&Re(l);return{c(){i&&i.c(),e=M(),a&&a.c(),t=M(),n&&n.c(),s=de()},l(r){i&&i.l(r),e=O(r),a&&a.l(r),t=O(r),n&&n.l(r),s=de()},m(r,c){i&&i.m(r,c),y(r,e,c),a&&a.m(r,c),y(r,t,c),n&&n.m(r,c),y(r,s,c)},p(r,c){r[51].quality?i?i.p(r,c):(i=Ve(r),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),r[51].size_mb?a?a.p(r,c):(a=Le(r),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),r[51].seeders!==void 0?n?n.p(r,c):(n=Re(r),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(r){r&&(d(e),d(t),d(s)),i&&i.d(r),a&&a.d(r),n&&n.d(r)}}}function Ve(l){let e,t,s=l[51].quality+"",i;return{c(){e=w("span"),t=D("üéß "),i=D(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var n=P(e);t=T(n,"üéß "),i=T(n,s),n.forEach(d),this.h()},h(){v(e,"class","meta-item quality svelte-7n2d85")},m(a,n){y(a,e,n),u(e,t),u(e,i)},p(a,n){n[0]&16&&s!==(s=a[51].quality+"")&&X(i,s)},d(a){a&&d(e)}}}function Le(l){let e,t,s=l[51].size_mb+"",i,a;return{c(){e=w("span"),t=D("üíæ "),i=D(s),a=D("MB"),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=P(e);t=T(r,"üíæ "),i=T(r,s),a=T(r,"MB"),r.forEach(d),this.h()},h(){v(e,"class","meta-item size svelte-7n2d85")},m(n,r){y(n,e,r),u(e,t),u(e,i),u(e,a)},p(n,r){r[0]&16&&s!==(s=n[51].size_mb+"")&&X(i,s)},d(n){n&&d(e)}}}function Re(l){let e,t,s=l[51].seeders+"",i,a,n=l[51].leechers+"",r,c;return{c(){e=w("span"),t=D("üå± "),i=D(s),a=D("‚Üë "),r=D(n),c=D("‚Üì"),this.h()},l(_){e=k(_,"SPAN",{class:!0});var f=P(e);t=T(f,"üå± "),i=T(f,s),a=T(f,"‚Üë "),r=T(f,n),c=T(f,"‚Üì"),f.forEach(d),this.h()},h(){v(e,"class","meta-item seeders svelte-7n2d85")},m(_,f){y(_,e,f),u(e,t),u(e,i),u(e,a),u(e,r),u(e,c)},p(_,f){f[0]&16&&s!==(s=_[51].seeders+"")&&X(i,s),f[0]&16&&n!==(n=_[51].leechers+"")&&X(r,n)},d(_){_&&d(e)}}}function Ue(l){let e,t,s,i,a,n,r=l[51].rating&&l[51].rating>0&&je(l),c=l[51].country&&He(l),_=l[51].type&&Fe(l),f=l[51].aliases&&l[51].aliases.length>0&&Ke(l),h=l[51].isrcs&&l[51].isrcs.length>0&&Qe(),m=l[51].score&&l[51].score>0&&Ge(l);return{c(){r&&r.c(),e=M(),c&&c.c(),t=M(),_&&_.c(),s=M(),f&&f.c(),i=M(),h&&h.c(),a=M(),m&&m.c(),n=de()},l(o){r&&r.l(o),e=O(o),c&&c.l(o),t=O(o),_&&_.l(o),s=O(o),f&&f.l(o),i=O(o),h&&h.l(o),a=O(o),m&&m.l(o),n=de()},m(o,p){r&&r.m(o,p),y(o,e,p),c&&c.m(o,p),y(o,t,p),_&&_.m(o,p),y(o,s,p),f&&f.m(o,p),y(o,i,p),h&&h.m(o,p),y(o,a,p),m&&m.m(o,p),y(o,n,p)},p(o,p){o[51].rating&&o[51].rating>0?r?r.p(o,p):(r=je(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),o[51].country?c?c.p(o,p):(c=He(o),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),o[51].type?_?_.p(o,p):(_=Fe(o),_.c(),_.m(s.parentNode,s)):_&&(_.d(1),_=null),o[51].aliases&&o[51].aliases.length>0?f?f.p(o,p):(f=Ke(o),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null),o[51].isrcs&&o[51].isrcs.length>0?h||(h=Qe(),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null),o[51].score&&o[51].score>0?m?m.p(o,p):(m=Ge(o),m.c(),m.m(n.parentNode,n)):m&&(m.d(1),m=null)},d(o){o&&(d(e),d(t),d(s),d(i),d(a),d(n)),r&&r.d(o),c&&c.d(o),_&&_.d(o),f&&f.d(o),h&&h.d(o),m&&m.d(o)}}}function je(l){let e,t,s=l[51].rating+"",i,a;return{c(){e=w("span"),t=D("‚≠ê "),i=D(s),a=D("/5"),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=P(e);t=T(r,"‚≠ê "),i=T(r,s),a=T(r,"/5"),r.forEach(d),this.h()},h(){v(e,"class","meta-item rating svelte-7n2d85")},m(n,r){y(n,e,r),u(e,t),u(e,i),u(e,a)},p(n,r){r[0]&16&&s!==(s=n[51].rating+"")&&X(i,s)},d(n){n&&d(e)}}}function He(l){let e,t,s=l[51].country+"",i;return{c(){e=w("span"),t=D("üåç "),i=D(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var n=P(e);t=T(n,"üåç "),i=T(n,s),n.forEach(d),this.h()},h(){v(e,"class","meta-item country svelte-7n2d85")},m(a,n){y(a,e,n),u(e,t),u(e,i)},p(a,n){n[0]&16&&s!==(s=a[51].country+"")&&X(i,s)},d(a){a&&d(e)}}}function Fe(l){let e,t,s=l[51].type+"",i;return{c(){e=w("span"),t=D("üè∑Ô∏è "),i=D(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var n=P(e);t=T(n,"üè∑Ô∏è "),i=T(n,s),n.forEach(d),this.h()},h(){v(e,"class","meta-item type svelte-7n2d85")},m(a,n){y(a,e,n),u(e,t),u(e,i)},p(a,n){n[0]&16&&s!==(s=a[51].type+"")&&X(i,s)},d(a){a&&d(e)}}}function Ke(l){let e,t,s=l[51].aliases+"",i;return{c(){e=w("span"),t=D("üìù "),i=D(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var n=P(e);t=T(n,"üìù "),i=T(n,s),n.forEach(d),this.h()},h(){v(e,"class","meta-item aliases svelte-7n2d85")},m(a,n){y(a,e,n),u(e,t),u(e,i)},p(a,n){n[0]&16&&s!==(s=a[51].aliases+"")&&X(i,s)},d(a){a&&d(e)}}}function Qe(l){let e,t="üî¢ ISRC";return{c(){e=w("span"),e.textContent=t,this.h()},l(s){e=k(s,"SPAN",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1gag0e6"&&(e.textContent=t),this.h()},h(){v(e,"class","meta-item isrcs svelte-7n2d85")},m(s,i){y(s,e,i)},d(s){s&&d(e)}}}function Ge(l){let e,t,s=l[51].score+"",i,a;return{c(){e=w("span"),t=D("üéØ "),i=D(s),a=D("% match"),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=P(e);t=T(r,"üéØ "),i=T(r,s),a=T(r,"% match"),r.forEach(d),this.h()},h(){v(e,"class","meta-item score svelte-7n2d85")},m(n,r){y(n,e,r),u(e,t),u(e,i),u(e,a)},p(n,r){r[0]&16&&s!==(s=n[51].score+"")&&X(i,s)},d(n){n&&d(e)}}}function Dt(l){let e;return{c(){e=D("üåê External")},l(t){e=T(t,"üåê External")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function Nt(l){let e;return{c(){e=D("‚¨áÔ∏è Download")},l(t){e=T(t,"‚¨áÔ∏è Download")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function Pt(l){let e;return{c(){e=D("üè† Local")},l(t){e=T(t,"üè† Local")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function Je(l){let e,t="‚òÖ".repeat(Math.ceil(l[51].popularity/20))+"",s;return{c(){e=w("span"),s=D(t),this.h()},l(i){e=k(i,"SPAN",{class:!0});var a=P(e);s=T(a,t),a.forEach(d),this.h()},h(){v(e,"class","popularity svelte-7n2d85")},m(i,a){y(i,e,a),u(e,s)},p(i,a){a[0]&16&&t!==(t="‚òÖ".repeat(Math.ceil(i[51].popularity/20))+"")&&X(s,t)},d(i){i&&d(e)}}}function Ye(l){let e,t,s=l[51].indexer+"",i;return{c(){e=w("span"),t=D("üì° "),i=D(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var n=P(e);t=T(n,"üì° "),i=T(n,s),n.forEach(d),this.h()},h(){v(e,"class","indexer svelte-7n2d85")},m(a,n){y(a,e,n),u(e,t),u(e,i)},p(a,n){n[0]&16&&s!==(s=a[51].indexer+"")&&X(i,s)},d(a){a&&d(e)}}}function It(l){let e,t,s,i,a;function n(f,h){return h[0]&16&&(e=null),h[0]&16&&(t=null),h[0]&16&&(s=null),e==null&&(e=f[16](f[51])==="requesting"),e?Bt:(t==null&&(t=f[16](f[51])==="monitoring"),t?At:(s==null&&(s=f[16](f[51])==="failed"),s?Mt:Ot))}let r=n(l,[-1,-1]),c=r(l),_=l[51].external_url&&Ze(l);return{c(){c.c(),i=M(),_&&_.c(),a=de()},l(f){c.l(f),i=O(f),_&&_.l(f),a=de()},m(f,h){c.m(f,h),y(f,i,h),_&&_.m(f,h),y(f,a,h)},p(f,h){r===(r=n(f,h))&&c?c.p(f,h):(c.d(1),c=r(f),c&&(c.c(),c.m(i.parentNode,i))),f[51].external_url?_?_.p(f,h):(_=Ze(f),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},d(f){f&&(d(i),d(a)),c.d(f),_&&_.d(f)}}}function We(l){let e,t,s=l[54].text+"",i,a,n,r,c,_,f,h,m;function o(){return l[38](l[51])}let p=l[56]&&(l[56].status==="downloading"||l[56].status==="queued")&&$e(l),g=l[51].magnet_url&&tt(l);return{c(){e=w("div"),t=w("button"),i=D(s),c=M(),p&&p.c(),_=M(),g&&g.c(),f=de(),this.h()},l(C){e=k(C,"DIV",{class:!0});var z=P(e);t=k(z,"BUTTON",{class:!0,title:!0});var R=P(t);i=T(R,s),R.forEach(d),c=O(z),p&&p.l(z),z.forEach(d),_=O(C),g&&g.l(C),f=de(),this.h()},h(){v(t,"class",a="action-btn download-btn "+l[54].class+" svelte-7n2d85"),t.disabled=n=l[54].disabled,v(t,"title",r="Download "+l[51].quality+" - "+l[51].size_mb+"MB"),v(e,"class","download-section svelte-7n2d85")},m(C,z){y(C,e,z),u(e,t),u(t,i),u(e,c),p&&p.m(e,null),y(C,_,z),g&&g.m(C,z),y(C,f,z),h||(m=ee(t,"click",o),h=!0)},p(C,z){l=C,z[0]&16&&s!==(s=l[54].text+"")&&X(i,s),z[0]&16&&a!==(a="action-btn download-btn "+l[54].class+" svelte-7n2d85")&&v(t,"class",a),z[0]&16&&n!==(n=l[54].disabled)&&(t.disabled=n),z[0]&16&&r!==(r="Download "+l[51].quality+" - "+l[51].size_mb+"MB")&&v(t,"title",r),l[56]&&(l[56].status==="downloading"||l[56].status==="queued")?p?p.p(l,z):(p=$e(l),p.c(),p.m(e,null)):p&&(p.d(1),p=null),l[51].magnet_url?g?g.p(l,z):(g=tt(l),g.c(),g.m(f.parentNode,f)):g&&(g.d(1),g=null)},d(C){C&&(d(e),d(_),d(f)),p&&p.d(),g&&g.d(C),h=!1,m()}}}function Xe(l){let e,t,s,i=l[54].text+"",a,n,r,c,_,f,h,m=l[51].type==="track"&&lt(Te(l));function o(){return l[37](l[51])}let p=l[51].external_url&&st(l);return{c(){m&&m.c(),e=M(),t=w("button"),s=D("‚¨á "),a=D(i),c=M(),p&&p.c(),_=de(),this.h()},l(g){m&&m.l(g),e=O(g),t=k(g,"BUTTON",{class:!0});var C=P(t);s=T(C,"‚¨á "),a=T(C,i),C.forEach(d),c=O(g),p&&p.l(g),_=de(),this.h()},h(){v(t,"class",n="action-btn download-btn "+l[54].class+" svelte-7n2d85"),t.disabled=r=l[54].disabled},m(g,C){m&&m.m(g,C),y(g,e,C),y(g,t,C),u(t,s),u(t,a),y(g,c,C),p&&p.m(g,C),y(g,_,C),f||(h=ee(t,"click",o),f=!0)},p(g,C){l=g,l[51].type==="track"?m?m.p(Te(l),C):(m=lt(Te(l)),m.c(),m.m(e.parentNode,e)):m&&(m.d(1),m=null),C[0]&16&&i!==(i=l[54].text+"")&&X(a,i),C[0]&16&&n!==(n="action-btn download-btn "+l[54].class+" svelte-7n2d85")&&v(t,"class",n),C[0]&16&&r!==(r=l[54].disabled)&&(t.disabled=r),l[51].external_url?p?p.p(l,C):(p=st(l),p.c(),p.m(_.parentNode,_)):p&&(p.d(1),p=null)},d(g){g&&(d(e),d(t),d(c),d(_)),m&&m.d(g),p&&p.d(g),f=!1,h()}}}function qt(l){let e,t="‚ñ∂Ô∏è Play",s,i,a="‚ûï Queue",n,r;function c(){return l[34](l[51])}function _(){return l[35](l[51])}return{c(){e=w("button"),e.textContent=t,s=M(),i=w("button"),i.textContent=a,this.h()},l(f){e=k(f,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(e)!=="svelte-1ym6d5r"&&(e.textContent=t),s=O(f),i=k(f,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(i)!=="svelte-5sedep"&&(i.textContent=a),this.h()},h(){v(e,"class","action-btn play-btn svelte-7n2d85"),v(e,"title","Play Track"),v(i,"class","action-btn queue-btn svelte-7n2d85"),v(i,"title","Add to Queue")},m(f,h){y(f,e,h),y(f,s,h),y(f,i,h),n||(r=[ee(e,"click",c),ee(i,"click",_)],n=!0)},p(f,h){l=f},d(f){f&&(d(e),d(s),d(i)),n=!1,De(r)}}}function Ot(l){let e,t="‚¨áÔ∏è Download",s,i;function a(){return l[42](l[51])}return{c(){e=w("button"),e.textContent=t,this.h()},l(n){e=k(n,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(e)!=="svelte-gu1b56"&&(e.textContent=t),this.h()},h(){v(e,"class","action-btn download-btn svelte-7n2d85"),v(e,"title","Request Download")},m(n,r){y(n,e,r),s||(i=ee(e,"click",a),s=!0)},p(n,r){l=n},d(n){n&&d(e),s=!1,i()}}}function Mt(l){let e,t="üîÑ Retry Download",s,i;function a(){return l[41](l[51])}return{c(){e=w("button"),e.textContent=t,this.h()},l(n){e=k(n,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(e)!=="svelte-ui95cm"&&(e.textContent=t),this.h()},h(){v(e,"class","action-btn download-btn svelte-7n2d85"),v(e,"title","Retry Download")},m(n,r){y(n,e,r),s||(i=ee(e,"click",a),s=!0)},p(n,r){l=n},d(n){n&&d(e),s=!1,i()}}}function At(l){let e,t="üëÅÔ∏è Monitoring";return{c(){e=w("button"),e.textContent=t,this.h()},l(s){e=k(s,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1yzm8id"&&(e.textContent=t),this.h()},h(){v(e,"class","action-btn monitoring svelte-7n2d85"),e.disabled=!0},m(s,i){y(s,e,i)},p:we,d(s){s&&d(e)}}}function Bt(l){let e,t="‚è≥ Requesting...";return{c(){e=w("button"),e.textContent=t,this.h()},l(s){e=k(s,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1x2gkq3"&&(e.textContent=t),this.h()},h(){v(e,"class","action-btn requesting svelte-7n2d85"),e.disabled=!0},m(s,i){y(s,e,i)},p:we,d(s){s&&d(e)}}}function Ze(l){let e,t,s;return{c(){e=w("a"),t=D("üîó Open"),this.h()},l(i){e=k(i,"A",{href:!0,target:!0,rel:!0,class:!0,title:!0});var a=P(e);t=T(a,"üîó Open"),a.forEach(d),this.h()},h(){v(e,"href",s=l[51].external_url),v(e,"target","_blank"),v(e,"rel","noopener noreferrer"),v(e,"class","action-btn external-link svelte-7n2d85"),v(e,"title","Open External Link")},m(i,a){y(i,e,a),u(e,t)},p(i,a){a[0]&16&&s!==(s=i[51].external_url)&&v(e,"href",s)},d(i){i&&d(e)}}}function $e(l){let e,t,s,i="‚ùå",a,n,r,c,_=l[56].status==="downloading"&&xe(l);function f(){return l[40](l[51])}let h=l[56].download_speed&&et(l);return{c(){e=w("div"),_&&_.c(),t=M(),s=w("button"),s.textContent=i,a=M(),h&&h.c(),n=de(),this.h()},l(m){e=k(m,"DIV",{class:!0});var o=P(e);_&&_.l(o),t=O(o),s=k(o,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(s)!=="svelte-7f19p0"&&(s.textContent=i),o.forEach(d),a=O(m),h&&h.l(m),n=de(),this.h()},h(){v(s,"class","action-btn small-btn cancel-btn svelte-7n2d85"),v(s,"title","Cancel Download"),v(e,"class","download-controls svelte-7n2d85")},m(m,o){y(m,e,o),_&&_.m(e,null),u(e,t),u(e,s),y(m,a,o),h&&h.m(m,o),y(m,n,o),r||(c=ee(s,"click",f),r=!0)},p(m,o){l=m,l[56].status==="downloading"?_?_.p(l,o):(_=xe(l),_.c(),_.m(e,t)):_&&(_.d(1),_=null),l[56].download_speed?h?h.p(l,o):(h=et(l),h.c(),h.m(n.parentNode,n)):h&&(h.d(1),h=null)},d(m){m&&(d(e),d(a),d(n)),_&&_.d(),h&&h.d(m),r=!1,c()}}}function xe(l){let e,t="‚è∏Ô∏è",s,i;function a(){return l[39](l[51])}return{c(){e=w("button"),e.textContent=t,this.h()},l(n){e=k(n,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(e)!=="svelte-ylmk6x"&&(e.textContent=t),this.h()},h(){v(e,"class","action-btn small-btn pause-btn svelte-7n2d85"),v(e,"title","Pause Download")},m(n,r){y(n,e,r),s||(i=ee(e,"click",a),s=!0)},p(n,r){l=n},d(n){n&&d(e),s=!1,i()}}}function et(l){let e,t,s,i=Math.round(l[56].download_speed/1024)+"",a,n;return{c(){e=w("div"),t=w("small"),s=D("Speed: "),a=D(i),n=D(" KB/s"),this.h()},l(r){e=k(r,"DIV",{class:!0});var c=P(e);t=k(c,"SMALL",{});var _=P(t);s=T(_,"Speed: "),a=T(_,i),n=T(_," KB/s"),_.forEach(d),c.forEach(d),this.h()},h(){v(e,"class","download-info svelte-7n2d85")},m(r,c){y(r,e,c),u(e,t),u(t,s),u(t,a),u(t,n)},p(r,c){c[0]&16&&i!==(i=Math.round(r[56].download_speed/1024)+"")&&X(a,i)},d(r){r&&d(e)}}}function tt(l){let e,t,s;return{c(){e=w("a"),t=D("üß≤ Magnet"),this.h()},l(i){e=k(i,"A",{href:!0,target:!0,rel:!0,class:!0,title:!0});var a=P(e);t=T(a,"üß≤ Magnet"),a.forEach(d),this.h()},h(){v(e,"href",s=l[51].magnet_url),v(e,"target","_blank"),v(e,"rel","noopener noreferrer"),v(e,"class","action-btn external-link magnet-link svelte-7n2d85"),v(e,"title","Open Magnet Link")},m(i,a){y(i,e,a),u(e,t)},p(i,a){a[0]&16&&s!==(s=i[51].magnet_url)&&v(e,"href",s)},d(i){i&&d(e)}}}function lt(l){let e,t,s=l[55].text+"",i,a,n,r,c;function _(){return l[36](l[51])}return{c(){e=w("button"),t=D("üéµ "),i=D(s),this.h()},l(f){e=k(f,"BUTTON",{class:!0});var h=P(e);t=T(h,"üéµ "),i=T(h,s),h.forEach(d),this.h()},h(){v(e,"class",a="action-btn preview-btn "+l[55].class+" svelte-7n2d85"),e.disabled=n=l[55].disabled},m(f,h){y(f,e,h),u(e,t),u(e,i),r||(c=ee(e,"click",_),r=!0)},p(f,h){l=f,h[0]&16&&s!==(s=l[55].text+"")&&X(i,s),h[0]&16&&a!==(a="action-btn preview-btn "+l[55].class+" svelte-7n2d85")&&v(e,"class",a),h[0]&16&&n!==(n=l[55].disabled)&&(e.disabled=n)},d(f){f&&d(e),r=!1,c()}}}function st(l){let e,t,s;return{c(){e=w("a"),t=D("üîó MusicBrainz"),this.h()},l(i){e=k(i,"A",{href:!0,target:!0,rel:!0,class:!0});var a=P(e);t=T(a,"üîó MusicBrainz"),a.forEach(d),this.h()},h(){v(e,"href",s=l[51].external_url),v(e,"target","_blank"),v(e,"rel","noopener noreferrer"),v(e,"class","action-btn external-link svelte-7n2d85")},m(i,a){y(i,e,a),u(e,t)},p(i,a){a[0]&16&&s!==(s=i[51].external_url)&&v(e,"href",s)},d(i){i&&d(e)}}}function nt(l){let e,t,s,i=l[51].title+"",a,n,r,c=l[51].artist+"",_,f,h,m=(l[51].album||"Unknown Album")+"",o,p,g,C,z,R,Y,re,G,V,U,ce,x,Z,J,F=l[51].year&&Me(l),j=l[51].duration&&Ae(l),B=l[51].genre&&Be(l),N=l[51].source==="lidarr"&&ze(l),I=l[51].source==="musicbrainz"&&Ue(l);function te(E,A){return E[51].source==="local"?Pt:E[51].source==="lidarr"?Nt:Dt}let ae=te(l),K=ae(l),W=l[51].popularity&&Je(l),Q=l[51].source==="lidarr"&&l[51].indexer&&Ye(l);function me(E,A){return E[51].available&&E[51].stream_url?qt:E[51].source==="musicbrainz"?Xe:E[51].source==="lidarr"&&E[51].downloadable?We:It}function ne(E,A){return A===Xe?kt(E):A===We?gt(E):E}let fe=me(l),se=fe(ne(l,fe));return{c(){e=w("div"),t=w("div"),s=w("h4"),a=D(i),n=M(),r=w("p"),_=D(c),f=M(),h=w("p"),o=D(m),p=M(),g=w("div"),F&&F.c(),C=M(),j&&j.c(),z=M(),B&&B.c(),R=M(),N&&N.c(),Y=M(),I&&I.c(),re=M(),G=w("div"),V=w("span"),K.c(),U=M(),W&&W.c(),ce=M(),Q&&Q.c(),x=M(),Z=w("div"),se.c(),J=M(),this.h()},l(E){e=k(E,"DIV",{class:!0});var A=P(e);t=k(A,"DIV",{class:!0});var $=P(t);s=k($,"H4",{class:!0});var he=P(s);a=T(he,i),he.forEach(d),n=O($),r=k($,"P",{class:!0});var pe=P(r);_=T(pe,c),pe.forEach(d),f=O($),h=k($,"P",{class:!0});var ve=P(h);o=T(ve,m),ve.forEach(d),p=O($),g=k($,"DIV",{class:!0});var le=P(g);F&&F.l(le),C=O(le),j&&j.l(le),z=O(le),B&&B.l(le),R=O(le),N&&N.l(le),Y=O(le),I&&I.l(le),le.forEach(d),$.forEach(d),re=O(A),G=k(A,"DIV",{class:!0});var oe=P(G);V=k(oe,"SPAN",{class:!0});var _e=P(V);K.l(_e),_e.forEach(d),U=O(oe),W&&W.l(oe),ce=O(oe),Q&&Q.l(oe),oe.forEach(d),x=O(A),Z=k(A,"DIV",{class:!0});var Ce=P(Z);se.l(Ce),Ce.forEach(d),J=O(A),A.forEach(d),this.h()},h(){v(s,"class","track-title svelte-7n2d85"),v(r,"class","track-artist svelte-7n2d85"),v(h,"class","track-album svelte-7n2d85"),v(g,"class","track-meta svelte-7n2d85"),v(t,"class","track-info svelte-7n2d85"),v(V,"class","source-badge svelte-7n2d85"),ie(V,"local",l[51].source==="local"),ie(V,"external",l[51].source!=="local"&&l[51].source!=="lidarr"),ie(V,"lidarr",l[51].source==="lidarr"),v(G,"class","source-info svelte-7n2d85"),v(Z,"class","track-actions svelte-7n2d85"),v(e,"class","track-card svelte-7n2d85"),ie(e,"local",l[51].source==="local"),ie(e,"external",l[51].source!=="local")},m(E,A){y(E,e,A),u(e,t),u(t,s),u(s,a),u(t,n),u(t,r),u(r,_),u(t,f),u(t,h),u(h,o),u(t,p),u(t,g),F&&F.m(g,null),u(g,C),j&&j.m(g,null),u(g,z),B&&B.m(g,null),u(g,R),N&&N.m(g,null),u(g,Y),I&&I.m(g,null),u(e,re),u(e,G),u(G,V),K.m(V,null),u(G,U),W&&W.m(G,null),u(G,ce),Q&&Q.m(G,null),u(e,x),u(e,Z),se.m(Z,null),u(e,J)},p(E,A){A[0]&16&&i!==(i=E[51].title+"")&&X(a,i),A[0]&16&&c!==(c=E[51].artist+"")&&X(_,c),A[0]&16&&m!==(m=(E[51].album||"Unknown Album")+"")&&X(o,m),E[51].year?F?F.p(E,A):(F=Me(E),F.c(),F.m(g,C)):F&&(F.d(1),F=null),E[51].duration?j?j.p(E,A):(j=Ae(E),j.c(),j.m(g,z)):j&&(j.d(1),j=null),E[51].genre?B?B.p(E,A):(B=Be(E),B.c(),B.m(g,R)):B&&(B.d(1),B=null),E[51].source==="lidarr"?N?N.p(E,A):(N=ze(E),N.c(),N.m(g,Y)):N&&(N.d(1),N=null),E[51].source==="musicbrainz"?I?I.p(E,A):(I=Ue(E),I.c(),I.m(g,null)):I&&(I.d(1),I=null),ae!==(ae=te(E))&&(K.d(1),K=ae(E),K&&(K.c(),K.m(V,null))),A[0]&16&&ie(V,"local",E[51].source==="local"),A[0]&16&&ie(V,"external",E[51].source!=="local"&&E[51].source!=="lidarr"),A[0]&16&&ie(V,"lidarr",E[51].source==="lidarr"),E[51].popularity?W?W.p(E,A):(W=Je(E),W.c(),W.m(G,ce)):W&&(W.d(1),W=null),E[51].source==="lidarr"&&E[51].indexer?Q?Q.p(E,A):(Q=Ye(E),Q.c(),Q.m(G,null)):Q&&(Q.d(1),Q=null),fe===(fe=me(E))&&se?se.p(ne(E,fe),A):(se.d(1),se=fe(ne(E,fe)),se&&(se.c(),se.m(Z,null))),A[0]&16&&ie(e,"local",E[51].source==="local"),A[0]&16&&ie(e,"external",E[51].source!=="local")},d(E){E&&d(e),F&&F.d(),j&&j.d(),B&&B.d(),N&&N.d(),I&&I.d(),K.d(),W&&W.d(),Q&&Q.d(),se.d()}}}function zt(l){let e,t,s=`<h2 class="search-title svelte-7n2d85"><span class="title-icon svelte-7n2d85">üîç</span>
            Global Music Search</h2> <p class="search-subtitle svelte-7n2d85">Search your library and discover new music from external sources</p>`,i,a,n,r,c,_,f,h="üîç",m,o,p,g,C,z,R,Y,re,G,V=l[3]&&Ie(l),U=l[5]&&qe();function ce(N,I){return N[5]?Ct:wt}let x=ce(l),Z=x(l),J=l[1]&&Oe(l);function F(N,I){if(N[6])return Tt;if(N[4].length>0)return St;if(N[3].length>=2&&!N[5])return Et;if(N[3].length<2)return yt}let j=F(l),B=j&&j(l);return{c(){e=w("div"),t=w("div"),t.innerHTML=s,i=M(),a=w("div"),n=w("div"),r=w("div"),c=w("input"),_=M(),f=w("div"),f.textContent=h,m=M(),V&&V.c(),o=M(),U&&U.c(),p=M(),g=w("button"),Z.c(),z=M(),J&&J.c(),R=M(),Y=w("div"),B&&B.c(),this.h()},l(N){e=k(N,"DIV",{class:!0});var I=P(e);t=k(I,"DIV",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-9q5j2l"&&(t.innerHTML=s),i=O(I),a=k(I,"DIV",{class:!0});var te=P(a);n=k(te,"DIV",{class:!0});var ae=P(n);r=k(ae,"DIV",{class:!0});var K=P(r);c=k(K,"INPUT",{type:!0,class:!0,placeholder:!0,autocomplete:!0}),_=O(K),f=k(K,"DIV",{class:!0,"data-svelte-h":!0}),H(f)!=="svelte-6duvnh"&&(f.textContent=h),m=O(K),V&&V.l(K),o=O(K),U&&U.l(K),K.forEach(d),p=O(ae),g=k(ae,"BUTTON",{class:!0});var W=P(g);Z.l(W),W.forEach(d),ae.forEach(d),z=O(te),J&&J.l(te),te.forEach(d),R=O(I),Y=k(I,"DIV",{class:!0});var Q=P(Y);B&&B.l(Q),Q.forEach(d),I.forEach(d),this.h()},h(){v(t,"class","search-header svelte-7n2d85"),v(c,"type","text"),v(c,"class","search-input svelte-7n2d85"),v(c,"placeholder",l[0]),v(c,"autocomplete","off"),v(f,"class","search-icon svelte-7n2d85"),v(r,"class","search-input-wrapper svelte-7n2d85"),v(g,"class","search-submit-btn svelte-7n2d85"),g.disabled=C=l[3].trim().length<2||l[5],v(n,"class","search-input-container svelte-7n2d85"),v(a,"class","search-controls svelte-7n2d85"),v(Y,"class","search-results"),v(e,"class","global-search svelte-7n2d85"),ie(e,"loaded",l[2])},m(N,I){y(N,e,I),u(e,t),u(e,i),u(e,a),u(a,n),u(n,r),u(r,c),ue(c,l[3]),u(r,_),u(r,f),u(r,m),V&&V.m(r,null),u(r,o),U&&U.m(r,null),u(n,p),u(n,g),Z.m(g,null),u(a,z),J&&J.m(a,null),u(e,R),u(e,Y),B&&B.m(Y,null),re||(G=[ee(c,"input",l[29]),ee(c,"keydown",l[10]),ee(g,"click",l[11])],re=!0)},p(N,I){I[0]&1&&v(c,"placeholder",N[0]),I[0]&8&&c.value!==N[3]&&ue(c,N[3]),N[3]?V?V.p(N,I):(V=Ie(N),V.c(),V.m(r,o)):V&&(V.d(1),V=null),N[5]?U||(U=qe(),U.c(),U.m(r,null)):U&&(U.d(1),U=null),x!==(x=ce(N))&&(Z.d(1),Z=x(N),Z&&(Z.c(),Z.m(g,null))),I[0]&40&&C!==(C=N[3].trim().length<2||N[5])&&(g.disabled=C),N[1]?J?J.p(N,I):(J=Oe(N),J.c(),J.m(a,null)):J&&(J.d(1),J=null),j===(j=F(N))&&B?B.p(N,I):(B&&B.d(1),B=j&&j(N),B&&(B.c(),B.m(Y,null))),I[0]&4&&ie(e,"loaded",N[2])},i:we,o:we,d(N){N&&d(e),V&&V.d(),U&&U.d(),Z.d(),J&&J.d(),B&&B.d(),re=!1,De(G)}}}function at(l){if(!l)return"";const e=Math.floor(l/60),t=l%60;return`${e}:${t.toString().padStart(2,"0")}`}function Vt(l,e,t){let{placeholder:s="Search music globally..."}=e,{showFilters:i=!0}=e,a=!1,n="",r=[],c=!1,_=null,f="global",h="all",m="relevance",o=new Map,p=new Map,g=new Map,C=new Map;rt(()=>{t(2,a=!0),x()});function z(b){b.key==="Enter"&&R()}function R(){const b=n.trim();b.length>=2?Y(b):(t(4,r=[]),t(6,_=null))}async function Y(b){if(!(!b||b.length<2)){t(5,c=!0),t(6,_=null);try{const S=f==="external"?`/api/v1/search/external/${encodeURIComponent(b)}`:`/api/v1/search/global/${encodeURIComponent(b)}`,q=new URLSearchParams;q.append("category",h),q.append("type",f);const L=`${S}?${q.toString()}`,ye=await(await fetch(L)).json();ye.success?t(4,r=re(ye.results||[])):(t(6,_=ye.message||"Search failed"),t(4,r=[]))}catch(S){console.error("Search error:",S),t(6,_="Failed to perform search. Please try again."),t(4,r=[])}finally{t(5,c=!1)}}}function re(b){return b.sort((S,q)=>{switch(m){case"popularity":return(q.popularity||0)-(S.popularity||0);case"year":return(q.year||0)-(S.year||0);case"duration":return(S.duration||0)-(q.duration||0);case"relevance":default:return S.source==="local"&&q.source!=="local"?-1:q.source==="local"&&S.source!=="local"?1:(q.popularity||0)-(S.popularity||0)}})}function G(b){b.available&&b.stream_url&&(console.log("Playing track from global search:",b.title),ke&&ke.playTrack?ke.playTrack(b):console.warn("Music player actions not available"))}function V(b){b.available&&b.stream_url&&(console.log("Adding track to queue from global search:",b.title),ke&&ke.addToQueue?ke.addToQueue(b):console.warn("Music player actions not available"))}async function U(b){const S=`${b.artist}-${b.title}`;if(!o.has(S)){o.set(S,"requesting"),o=o;try{const L=await(await fetch("/api/v1/download/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:b.title,artist:b.artist,album:b.album,external_id:b.id,source:b.source})})).json();L.success?(o.set(S,"monitoring"),L.request_id&&C.set(S,{request_id:L.request_id,status:L.status||"queued",artist_name:b.artist,track_title:b.title}),console.log("Download request successful:",L.message)):(o.set(S,"failed"),console.error("Download request failed:",L.message))}catch(q){console.error("Download request error:",q),o.set(S,"failed")}o=o}}function ce(b){const S=`${b.artist}-${b.title}`,q=C.get(S);return q?q.status:o.get(S)||null}function x(){setInterval(async()=>{await Z()},5e3)}async function Z(){for(const[b,S]of C.entries())if(S.request_id&&(S.status==="queued"||S.status==="downloading"))try{const L=await(await fetch(`/api/v1/download/status/${S.request_id}`)).json();L.success&&(S.status=L.status,S.progress=L.progress||0,S.download_speed=L.download_speed,S.file_size=L.file_size,S.torrent_hash=L.torrent_hash,C.set(b,S),L.status==="completed"?o.set(b,"completed"):L.status==="downloading"?o.set(b,"downloading"):(L.status==="failed"||L.status==="error")&&o.set(b,"failed"),C=C,o=o)}catch(q){console.error("Failed to update download status:",q)}}async function J(b){const S=`${b.artist}-${b.title}`,q=C.get(S);if(q&&q.torrent_hash)try{(await(await fetch(`/api/v1/download/pause/${q.torrent_hash}`,{method:"POST"})).json()).success&&(console.log("Download paused successfully"),Z())}catch(L){console.error("Failed to pause download:",L)}}async function F(b){const S=`${b.artist}-${b.title}`,q=C.get(S);if(q&&q.torrent_hash)try{(await(await fetch(`/api/v1/download/cancel/${q.torrent_hash}`,{method:"POST"})).json()).success&&(o.set(S,"cancelled"),C.delete(S),o=o,C=C,console.log("Download cancelled successfully"))}catch(L){console.error("Failed to cancel download:",L)}}function j(b){const S=`${b.artist}-${b.title}`;return C.get(S)||null}function B(b){const S=`${b.artist}-${b.title}`,q=o.get(S),L=C.get(S);if(q==="requesting")return{text:"‚è≥ Requesting...",disabled:!0,class:"requesting"};if(L)switch(L.status){case"queued":return{text:"üì¶ Queued",disabled:!0,class:"queued"};case"downloading":return{text:`‚¨áÔ∏è ${Math.round((L.progress||0)*100)}%`,disabled:!0,class:"downloading"};case"completed":return{text:"‚úÖ Completed",disabled:!0,class:"completed"};case"failed":case"error":return{text:"üîÑ Retry",disabled:!1,class:"failed"};case"paused":return{text:"‚è∏Ô∏è Paused",disabled:!0,class:"paused"};default:return{text:"üëÅÔ∏è Monitoring",disabled:!0,class:"monitoring"}}return q==="monitoring"?{text:"üëÅÔ∏è Monitoring",disabled:!0,class:"monitoring"}:q==="failed"?{text:"üîÑ Retry",disabled:!1,class:"failed"}:q==="completed"?{text:"‚úÖ Complete",disabled:!0,class:"completed"}:{text:`‚¨áÔ∏è Get ${b.quality||"Music"}`,disabled:!1,class:"default"}}function N(){t(3,n=""),t(4,r=[]),t(6,_=null)}function I(){n.length>=2&&r.length>0&&R()}function te(){n.length>=2&&r.length>0&&R()}function ae(){r.length>0&&t(4,r=re(r))}async function K(b){const S=b.musicbrainz_id||b.id;if(o.get(S)!=="downloading"){o.set(S,"downloading"),t(4,r=[...r]);try{const q={type:b.type||"track",name:b.title,artist:b.artist,mbid:b.musicbrainz_id},be=await(await fetch(`/api/v1/download/musicbrainz/${b.musicbrainz_id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).json();be.success?(o.set(S,"success"),be.downloads&&be.downloads.length>0&&g.set(S,be.downloads)):(o.set(S,"failed"),console.error("Download failed:",be.error))}catch(q){console.error("Download error:",q),o.set(S,"failed")}t(4,r=[...r])}}async function W(b){const S=b.musicbrainz_id||b.id;if(p.get(S)!=="loading"){p.set(S,"loading"),t(4,r=[...r]);try{const L=await(await fetch(`/api/v1/preview/musicbrainz/${b.musicbrainz_id}`)).json();L.success&&L.stream_url?(p.set(S,"available"),console.log("Preview available:",L.stream_url)):p.set(S,"unavailable")}catch(q){console.error("Preview error:",q),p.set(S,"unavailable")}t(4,r=[...r])}}function Q(b){const S=b.musicbrainz_id||b.id,q=o.get(S),L=g.has(S);return q==="downloading"?{text:"Searching...",disabled:!0,class:"downloading"}:q==="success"&&L?{text:"Available",disabled:!1,class:"success"}:q==="success"?{text:"Added to Monitor",disabled:!0,class:"success"}:q==="failed"?{text:"Try Again",disabled:!1,class:"failed"}:{text:"Download",disabled:!1,class:"default"}}function me(b){const S=b.musicbrainz_id||b.id,q=p.get(S);return q==="loading"?{text:"Loading...",disabled:!0,class:"loading"}:q==="available"?{text:"Play Preview",disabled:!1,class:"available"}:q==="unavailable"?{text:"No Preview",disabled:!0,class:"unavailable"}:{text:"Preview",disabled:!1,class:"default"}}function ne(){n=this.value,t(3,n)}function fe(){f=Se(this),t(7,f)}function se(){h=Se(this),t(8,h)}function E(){m=Se(this),t(9,m)}const A=()=>Y(n),$=b=>G(b),he=b=>V(b),pe=b=>W(b),ve=b=>K(b),le=b=>U(b),oe=b=>J(b),_e=b=>F(b),Ce=b=>U(b),ct=b=>U(b);return l.$$set=b=>{"placeholder"in b&&t(0,s=b.placeholder),"showFilters"in b&&t(1,i=b.showFilters)},[s,i,a,n,r,c,_,f,h,m,z,R,Y,G,V,U,ce,J,F,j,B,N,I,te,ae,K,W,Q,me,ne,fe,se,E,A,$,he,pe,ve,le,oe,_e,Ce,ct]}class Lt extends ot{constructor(e){super(),ut(this,e,Vt,zt,it,{placeholder:0,showFilters:1},null,[-1,-1])}}function Rt(l){let e,t,s,i,a,n;return a=new Lt({}),{c(){e=w("meta"),t=M(),s=w("div"),i=w("div"),mt(a.$$.fragment),this.h()},l(r){const c=vt("svelte-1oh74el",document.head);e=k(c,"META",{name:!0,content:!0}),c.forEach(d),t=O(r),s=k(r,"DIV",{class:!0});var _=P(s);i=k(_,"DIV",{class:!0});var f=P(i);bt(a.$$.fragment,f),f.forEach(d),_.forEach(d),this.h()},h(){document.title="Global Search - StepheyBot Music",v(e,"name","description"),v(e,"content","Search for music across your library and external sources. Discover new tracks and request downloads with StepheyBot Music's global search."),v(i,"class","container svelte-1d55oyn"),v(s,"class","search-page svelte-1d55oyn"),ie(s,"loaded",l[0])},m(r,c){u(document.head,e),y(r,t,c),y(r,s,c),u(s,i),pt(a,i,null),n=!0},p(r,[c]){(!n||c&1)&&ie(s,"loaded",r[0])},i(r){n||(ht(a.$$.fragment,r),n=!0)},o(r){_t(a.$$.fragment,r),n=!1},d(r){r&&(d(t),d(s)),d(e),dt(a)}}}function Ut(l,e,t){let s=!1;return rt(()=>{t(0,s=!0)}),[s]}class Qt extends ot{constructor(e){super(),ut(this,e,Ut,Rt,it,{})}}export{Qt as component};
