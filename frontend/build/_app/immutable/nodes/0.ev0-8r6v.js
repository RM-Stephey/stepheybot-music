import{s as $e,n as De,r as Oe,o as et,a as Nt,d as St,c as Ot,u as ct,v as Lt,w as At,x as zt,y as Ft}from"../chunks/DP8VM1Me.js";import{S as tt,i as lt,d as c,k as ue,l as n,s as ne,q as ye,a as W,b as a,o as x,c as d,e as g,g as C,n as oe,f as F,h as f,j as D,t as B,p as We,G as Ce,x as dt,H as Je,I as Ke,z as ft,r as Ze,u as xe,B as vt,m as Bt,C as ht,A as _t}from"../chunks/DOSGr0tm.js";import{e as Ve}from"../chunks/D6YF6ztN.js";import{p as Ut}from"../chunks/C1vi3_cs.js";import{a as Qt,s as Ht}from"../chunks/CY0B7flr.js";function kt(l,t,e){const s=l.slice();return s[45]=t[e],s[47]=e,s}function Rt(l){let t,e='<div class="track-icon svelte-1dgjsxy">‚è∏Ô∏è</div> <div class="track-info svelte-1dgjsxy"><div class="track-title svelte-1dgjsxy">No track selected</div> <div class="track-artist svelte-1dgjsxy">Choose a song to start listening</div></div>';return{c(){t=f("div"),t.innerHTML=e,this.h()},l(s){t=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-d4zgua"&&(t.innerHTML=e),this.h()},h(){n(t,"class","no-track svelte-1dgjsxy")},m(s,r){W(s,t,r)},p:De,d(s){s&&c(t)}}}function Xt(l){let t,e,s="üéµ",r,u,o,i,b=l[3].title+"",m,E,q,y=l[3].artist+"",v,h=l[9]&&pt();return{c(){t=f("div"),e=f("div"),e.textContent=s,r=D(),h&&h.c(),u=D(),o=f("div"),i=f("div"),m=B(b),E=D(),q=f("div"),v=B(y),this.h()},l(_){t=d(_,"DIV",{class:!0});var p=g(t);e=d(p,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-ukgp83"&&(e.textContent=s),r=C(p),h&&h.l(p),p.forEach(c),u=C(_),o=d(_,"DIV",{class:!0});var k=g(o);i=d(k,"DIV",{class:!0});var T=g(i);m=F(T,b),T.forEach(c),E=C(k),q=d(k,"DIV",{class:!0});var I=g(q);v=F(I,y),I.forEach(c),k.forEach(c),this.h()},h(){n(e,"class","track-icon"),n(t,"class","track-artwork svelte-1dgjsxy"),n(i,"class","track-title svelte-1dgjsxy"),n(q,"class","track-artist svelte-1dgjsxy"),n(o,"class","track-info svelte-1dgjsxy")},m(_,p){W(_,t,p),a(t,e),a(t,r),h&&h.m(t,null),W(_,u,p),W(_,o,p),a(o,i),a(i,m),a(o,E),a(o,q),a(q,v)},p(_,p){_[9]?h||(h=pt(),h.c(),h.m(t,null)):h&&(h.d(1),h=null),p[0]&8&&b!==(b=_[3].title+"")&&ne(m,b),p[0]&8&&y!==(y=_[3].artist+"")&&ne(v,y)},d(_){_&&(c(t),c(u),c(o)),h&&h.d()}}}function pt(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),g(t).forEach(c),this.h()},h(){n(t,"class","loading-spinner svelte-1dgjsxy")},m(e,s){W(e,t,s)},d(e){e&&c(t)}}}function Gt(l){let t,e=l[2]?"‚è∏Ô∏è":"‚ñ∂Ô∏è",s;return{c(){t=f("span"),s=B(e),this.h()},l(r){t=d(r,"SPAN",{class:!0});var u=g(t);s=F(u,e),u.forEach(c),this.h()},h(){n(t,"class","play-icon svelte-1dgjsxy")},m(r,u){W(r,t,u),a(t,s)},p(r,u){u[0]&4&&e!==(e=r[2]?"‚è∏Ô∏è":"‚ñ∂Ô∏è")&&ne(s,e)},d(r){r&&c(t)}}}function Wt(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),g(t).forEach(c),this.h()},h(){n(t,"class","loading-dot svelte-1dgjsxy")},m(e,s){W(e,t,s)},p:De,d(e){e&&c(t)}}}function Yt(l){let t;return{c(){t=B("üîÅ")},l(e){t=F(e,"üîÅ")},m(e,s){W(e,t,s)},d(e){e&&c(t)}}}function Jt(l){let t;return{c(){t=B("üîÅ")},l(e){t=F(e,"üîÅ")},m(e,s){W(e,t,s)},d(e){e&&c(t)}}}function Kt(l){let t;return{c(){t=B("üîÇ")},l(e){t=F(e,"üîÇ")},m(e,s){W(e,t,s)},d(e){e&&c(t)}}}function gt(l){let t,e,s,r,u=l[4].length+"",o,i,b,m,E,q,y,v,h,_,p=Ve(l[4]),k=[];for(let I=0;I<p.length;I+=1)k[I]=bt(kt(l,p,I));let T=null;return p.length||(T=mt()),{c(){t=f("div"),e=f("div"),s=f("h3"),r=B("Queue ("),o=B(u),i=B(" tracks)"),b=D(),m=f("button"),E=B("Clear All"),y=D(),v=f("div");for(let I=0;I<k.length;I+=1)k[I].c();T&&T.c(),this.h()},l(I){t=d(I,"DIV",{class:!0});var S=g(t);e=d(S,"DIV",{class:!0});var M=g(e);s=d(M,"H3",{class:!0});var w=g(s);r=F(w,"Queue ("),o=F(w,u),i=F(w," tracks)"),w.forEach(c),b=C(M),m=d(M,"BUTTON",{class:!0});var O=g(m);E=F(O,"Clear All"),O.forEach(c),M.forEach(c),y=C(S),v=d(S,"DIV",{class:!0});var A=g(v);for(let j=0;j<k.length;j+=1)k[j].l(A);T&&T.l(A),A.forEach(c),S.forEach(c),this.h()},h(){n(s,"class","svelte-1dgjsxy"),n(m,"class","clear-queue-btn svelte-1dgjsxy"),m.disabled=q=l[4].length===0,n(e,"class","queue-header svelte-1dgjsxy"),n(v,"class","queue-list svelte-1dgjsxy"),n(t,"class","queue-panel svelte-1dgjsxy")},m(I,S){W(I,t,S),a(t,e),a(e,s),a(s,r),a(s,o),a(s,i),a(e,b),a(e,m),a(m,E),a(t,y),a(t,v);for(let M=0;M<k.length;M+=1)k[M]&&k[M].m(v,null);T&&T.m(v,null),h||(_=x(m,"click",l[18]),h=!0)},p(I,S){if(S[0]&16&&u!==(u=I[4].length+"")&&ne(o,u),S[0]&16&&q!==(q=I[4].length===0)&&(m.disabled=q),S[0]&196656){p=Ve(I[4]);let M;for(M=0;M<p.length;M+=1){const w=kt(I,p,M);k[M]?k[M].p(w,S):(k[M]=bt(w),k[M].c(),k[M].m(v,null))}for(;M<k.length;M+=1)k[M].d(1);k.length=p.length,!p.length&&T?T.p(I,S):p.length?T&&(T.d(1),T=null):(T=mt(),T.c(),T.m(v,null))}},d(I){I&&c(t),We(k,I),T&&T.d(),h=!1,_()}}}function mt(l){let t,e='<p>No tracks in queue</p> <p class="queue-empty-subtitle svelte-1dgjsxy">Add some music to get started!</p> ';return{c(){t=f("div"),t.innerHTML=e,this.h()},l(s){t=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1xw69eu"&&(t.innerHTML=e),this.h()},h(){n(t,"class","queue-empty svelte-1dgjsxy")},m(s,r){W(s,t,r)},p:De,d(s){s&&c(t)}}}function bt(l){let t,e,s,r=l[45].title+"",u,o,i,b=l[45].artist+"",m,E,q,y=ze(l[45].duration)+"",v,h,_,p="‚ùå",k,T,I;function S(){return l[30](l[47])}function M(){return l[31](l[47])}return{c(){t=f("div"),e=f("div"),s=f("div"),u=B(r),o=D(),i=f("div"),m=B(b),E=D(),q=f("div"),v=B(y),h=D(),_=f("button"),_.textContent=p,k=D(),this.h()},l(w){t=d(w,"DIV",{class:!0});var O=g(t);e=d(O,"DIV",{class:!0});var A=g(e);s=d(A,"DIV",{class:!0});var j=g(s);u=F(j,r),j.forEach(c),o=C(A),i=d(A,"DIV",{class:!0});var Q=g(i);m=F(Q,b),Q.forEach(c),A.forEach(c),E=C(O),q=d(O,"DIV",{class:!0});var te=g(q);v=F(te,y),te.forEach(c),h=C(O),_=d(O,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(_)!=="svelte-njweh1"&&(_.textContent=p),k=C(O),O.forEach(c),this.h()},h(){n(s,"class","queue-track-title svelte-1dgjsxy"),n(i,"class","queue-track-artist svelte-1dgjsxy"),n(e,"class","queue-track-info svelte-1dgjsxy"),n(q,"class","queue-track-duration svelte-1dgjsxy"),n(_,"class","remove-track-btn svelte-1dgjsxy"),n(t,"class","queue-item svelte-1dgjsxy"),ue(t,"current",l[47]===l[5])},m(w,O){W(w,t,O),a(t,e),a(e,s),a(s,u),a(e,o),a(e,i),a(i,m),a(t,E),a(t,q),a(q,v),a(t,h),a(t,_),a(t,k),T||(I=[x(_,"click",Ce(S)),x(t,"click",M)],T=!0)},p(w,O){l=w,O[0]&16&&r!==(r=l[45].title+"")&&ne(u,r),O[0]&16&&b!==(b=l[45].artist+"")&&ne(m,b),O[0]&16&&y!==(y=ze(l[45].duration)+"")&&ne(v,y),O[0]&32&&ue(t,"current",l[47]===l[5])},d(w){w&&c(t),T=!1,Oe(I)}}}function Zt(l){let t,e,s,r,u,o,i,b,m="üîÄ",E,q,y,v,h,_,p,k,T,I,S,M,w,O,A,j,Q,te=ze(l[7])+"",$,G,U,le,Y,N,fe,H,ie,L,J=ze(l[8])+"",P,ae,R,re,se,de="üîä",ve,ce,me,V,X,ge,ee,he,K,ke,qe=l[4].length+"",Me,we,Ee,Be;function Ue(z,Z){return z[3]?Xt:Rt}let je=Ue(l),_e=je(l);function Ie(z,Z){return z[9]?Wt:Gt}let Ne=Ie(l),pe=Ne(l);function He(z,Z){return z[11]==="one"?Kt:z[11]==="all"?Jt:Yt}let Se=He(l),Te=Se(l),be=l[10]&&gt(l);return{c(){t=f("audio"),e=D(),s=f("div"),r=f("div"),_e.c(),u=D(),o=f("div"),i=f("div"),b=f("button"),b.textContent=m,E=D(),q=f("button"),y=B("‚èÆÔ∏è"),h=D(),_=f("button"),pe.c(),T=D(),I=f("button"),S=B("‚è≠Ô∏è"),w=D(),O=f("button"),Te.c(),A=D(),j=f("div"),Q=f("span"),$=B(te),G=D(),U=f("div"),le=f("div"),Y=D(),N=f("div"),fe=D(),H=f("div"),ie=D(),L=f("span"),P=B(J),ae=D(),R=f("div"),re=f("div"),se=f("span"),se.textContent=de,ve=D(),ce=f("div"),me=f("div"),V=D(),X=f("div"),ge=D(),ee=f("div"),he=D(),K=f("button"),ke=B("üìã "),Me=B(qe),we=D(),be&&be.c(),this.h()},l(z){t=d(z,"AUDIO",{preload:!0}),g(t).forEach(c),e=C(z),s=d(z,"DIV",{class:!0});var Z=g(s);r=d(Z,"DIV",{class:!0});var st=g(r);_e.l(st),st.forEach(c),u=C(Z),o=d(Z,"DIV",{class:!0});var Re=g(o);i=d(Re,"DIV",{class:!0});var Pe=g(i);b=d(Pe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),oe(b)!=="svelte-12ir8o1"&&(b.textContent=m),E=C(Pe),q=d(Pe,"BUTTON",{class:!0,title:!0});var at=g(q);y=F(at,"‚èÆÔ∏è"),at.forEach(c),h=C(Pe),_=d(Pe,"BUTTON",{class:!0,title:!0});var nt=g(_);pe.l(nt),nt.forEach(c),T=C(Pe),I=d(Pe,"BUTTON",{class:!0,title:!0});var rt=g(I);S=F(rt,"‚è≠Ô∏è"),rt.forEach(c),w=C(Pe),O=d(Pe,"BUTTON",{class:!0,title:!0});var ot=g(O);Te.l(ot),ot.forEach(c),Pe.forEach(c),A=C(Re),j=d(Re,"DIV",{class:!0});var Qe=g(j);Q=d(Qe,"SPAN",{class:!0});var it=g(Q);$=F(it,te),it.forEach(c),G=C(Qe),U=d(Qe,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var Le=g(U);le=d(Le,"DIV",{class:!0}),g(le).forEach(c),Y=C(Le),N=d(Le,"DIV",{class:!0,style:!0}),g(N).forEach(c),fe=C(Le),H=d(Le,"DIV",{class:!0,style:!0}),g(H).forEach(c),Le.forEach(c),ie=C(Qe),L=d(Qe,"SPAN",{class:!0});var ut=g(L);P=F(ut,J),ut.forEach(c),Qe.forEach(c),Re.forEach(c),ae=C(Z),R=d(Z,"DIV",{class:!0});var Xe=g(R);re=d(Xe,"DIV",{class:!0});var Ge=g(re);se=d(Ge,"SPAN",{class:!0,"data-svelte-h":!0}),oe(se)!=="svelte-12kgbbu"&&(se.textContent=de),ve=C(Ge),ce=d(Ge,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var Ae=g(ce);me=d(Ae,"DIV",{class:!0}),g(me).forEach(c),V=C(Ae),X=d(Ae,"DIV",{class:!0,style:!0}),g(X).forEach(c),ge=C(Ae),ee=d(Ae,"DIV",{class:!0,style:!0}),g(ee).forEach(c),Ae.forEach(c),Ge.forEach(c),he=C(Xe),K=d(Xe,"BUTTON",{class:!0,title:!0});var Ye=g(K);ke=F(Ye,"üìã "),Me=F(Ye,qe),Ye.forEach(c),Xe.forEach(c),we=C(Z),be&&be.l(Z),Z.forEach(c),this.h()},h(){n(t,"preload","metadata"),n(r,"class","current-track svelte-1dgjsxy"),n(b,"class","control-btn svelte-1dgjsxy"),n(b,"title","Shuffle"),ue(b,"active",l[12]),n(q,"class","control-btn svelte-1dgjsxy"),q.disabled=v=!l[3],n(q,"title","Previous"),n(_,"class","play-pause-btn svelte-1dgjsxy"),_.disabled=p=!l[3],n(_,"title",k=l[2]?"Pause":"Play"),ue(_,"loading",l[9]),n(I,"class","control-btn svelte-1dgjsxy"),I.disabled=M=!l[3],n(I,"title","Next"),n(O,"class","control-btn svelte-1dgjsxy"),n(O,"title","Repeat"),ue(O,"active",l[11]!=="none"),n(i,"class","control-buttons svelte-1dgjsxy"),n(Q,"class","time-display svelte-1dgjsxy"),n(le,"class","progress-track svelte-1dgjsxy"),n(N,"class","progress-fill svelte-1dgjsxy"),ye(N,"width",(l[8]?l[7]/l[8]*100:0)+"%"),n(H,"class","progress-handle svelte-1dgjsxy"),ye(H,"left",(l[8]?l[7]/l[8]*100:0)+"%"),n(U,"class","progress-bar svelte-1dgjsxy"),n(U,"role","slider"),n(U,"tabindex","0"),n(U,"aria-label","Track progress"),n(L,"class","time-display svelte-1dgjsxy"),n(j,"class","progress-container svelte-1dgjsxy"),n(o,"class","player-controls svelte-1dgjsxy"),n(se,"class","volume-icon svelte-1dgjsxy"),n(me,"class","volume-track svelte-1dgjsxy"),n(X,"class","volume-fill svelte-1dgjsxy"),ye(X,"width",l[6]*100+"%"),n(ee,"class","volume-handle svelte-1dgjsxy"),ye(ee,"left",l[6]*100+"%"),n(ce,"class","volume-bar svelte-1dgjsxy"),n(ce,"role","slider"),n(ce,"tabindex","0"),n(ce,"aria-label","Volume"),n(re,"class","volume-control svelte-1dgjsxy"),n(K,"class","queue-btn svelte-1dgjsxy"),n(K,"title","Queue"),ue(K,"active",l[10]),n(R,"class","player-extras svelte-1dgjsxy"),n(s,"class","music-player svelte-1dgjsxy"),ue(s,"loaded",l[0]),ue(s,"playing",l[2])},m(z,Z){W(z,t,Z),l[29](t),W(z,e,Z),W(z,s,Z),a(s,r),_e.m(r,null),a(s,u),a(s,o),a(o,i),a(i,b),a(i,E),a(i,q),a(q,y),a(i,h),a(i,_),pe.m(_,null),a(i,T),a(i,I),a(I,S),a(i,w),a(i,O),Te.m(O,null),a(o,A),a(o,j),a(j,Q),a(Q,$),a(j,G),a(j,U),a(U,le),a(U,Y),a(U,N),a(U,fe),a(U,H),a(j,ie),a(j,L),a(L,P),a(s,ae),a(s,R),a(R,re),a(re,se),a(re,ve),a(re,ce),a(ce,me),a(ce,V),a(ce,X),a(ce,ge),a(ce,ee),a(R,he),a(R,K),a(K,ke),a(K,Me),a(s,we),be&&be.m(s,null),Ee||(Be=[x(b,"click",l[24]),x(q,"click",l[15]),x(_,"click",l[13]),x(I,"click",l[14]),x(O,"click",l[23]),x(U,"click",l[19]),x(U,"mousedown",l[20]),x(U,"mouseup",l[21]),x(ce,"click",l[22]),x(K,"click",l[25])],Ee=!0)},p(z,Z){je===(je=Ue(z))&&_e?_e.p(z,Z):(_e.d(1),_e=je(z),_e&&(_e.c(),_e.m(r,null))),Z[0]&4096&&ue(b,"active",z[12]),Z[0]&8&&v!==(v=!z[3])&&(q.disabled=v),Ne===(Ne=Ie(z))&&pe?pe.p(z,Z):(pe.d(1),pe=Ne(z),pe&&(pe.c(),pe.m(_,null))),Z[0]&8&&p!==(p=!z[3])&&(_.disabled=p),Z[0]&4&&k!==(k=z[2]?"Pause":"Play")&&n(_,"title",k),Z[0]&512&&ue(_,"loading",z[9]),Z[0]&8&&M!==(M=!z[3])&&(I.disabled=M),Se!==(Se=He(z))&&(Te.d(1),Te=Se(z),Te&&(Te.c(),Te.m(O,null))),Z[0]&2048&&ue(O,"active",z[11]!=="none"),Z[0]&128&&te!==(te=ze(z[7])+"")&&ne($,te),Z[0]&384&&ye(N,"width",(z[8]?z[7]/z[8]*100:0)+"%"),Z[0]&384&&ye(H,"left",(z[8]?z[7]/z[8]*100:0)+"%"),Z[0]&256&&J!==(J=ze(z[8])+"")&&ne(P,J),Z[0]&64&&ye(X,"width",z[6]*100+"%"),Z[0]&64&&ye(ee,"left",z[6]*100+"%"),Z[0]&16&&qe!==(qe=z[4].length+"")&&ne(Me,qe),Z[0]&1024&&ue(K,"active",z[10]),z[10]?be?be.p(z,Z):(be=gt(z),be.c(),be.m(s,null)):be&&(be.d(1),be=null),Z[0]&1&&ue(s,"loaded",z[0]),Z[0]&4&&ue(s,"playing",z[2])},i:De,o:De,d(z){z&&(c(t),c(e),c(s)),l[29](null),_e.d(),pe.d(),Te.d(),be&&be.d(),Ee=!1,Oe(Be)}}}function ze(l){if(!l||isNaN(l))return"0:00";const t=Math.floor(l/60),e=Math.floor(l%60);return`${t}:${e.toString().padStart(2,"0")}`}function xt(l,t,e){let s,r=!1,u=null,o=[],i=0,b=.8,m=0,E=0,q=!1,y=!1,v="none",h=!1,_=!1,p=!1;et(()=>{console.log("üéµ MusicPlayer: Component mounted"),e(0,_=!0),R(),s?(console.log("üîä MusicPlayer: Setting up audio event listeners"),s.addEventListener("loadstart",T),s.addEventListener("loadeddata",I),s.addEventListener("canplay",S),s.addEventListener("timeupdate",M),s.addEventListener("ended",w),s.addEventListener("error",O)):console.warn("‚ö†Ô∏è MusicPlayer: Audio element not available on mount"),k()});function k(){Qt.update(V=>({...V,currentTrack:u,isPlaying:r,currentTime:m,duration:E,volume:b,queue:o,currentIndex:i,isLoading:q,togglePlayPause:A,nextTrack:te,previousTrack:$,playTrackFromParent:re,addTrackToQueue:se,setQueue:de}))}Nt(()=>{s&&(s.removeEventListener("loadstart",T),s.removeEventListener("loadeddata",I),s.removeEventListener("canplay",S),s.removeEventListener("timeupdate",M),s.removeEventListener("ended",w),s.removeEventListener("error",O))});function T(){e(9,q=!0)}function I(){e(8,E=s.duration||0)}function S(){e(9,q=!1)}function M(){s&&!p&&(e(7,m=s.currentTime),k())}function w(){te(),k()}function O(V){console.error("üö® MusicPlayer: Audio error occurred:",V),console.error("üö® MusicPlayer: Current audio src:",s==null?void 0:s.src),console.error("üö® MusicPlayer: Current track:",u),e(9,q=!1),e(2,r=!1)}async function A(){if(console.log("‚èØÔ∏è MusicPlayer: togglePlayPause called, isPlaying:",r,"currentTrack:",u),!u){console.warn("‚ö†Ô∏è MusicPlayer: No current track to toggle");return}r?await Q():await j(u),k()}async function j(V=null){if(console.log("‚ñ∂Ô∏è MusicPlayer: playTrack called with:",V),V&&(console.log("üîó MusicPlayer: Setting audio source to:",V.stream_url),e(3,u=V),e(1,s.src=V.stream_url,s)),!s.src){console.warn("‚ö†Ô∏è MusicPlayer: No audio source available");return}try{console.log("üéß MusicPlayer: Starting playback..."),e(9,q=!0),await s.play(),e(2,r=!0),console.log("‚úÖ MusicPlayer: Playback started successfully"),u&&(console.log("üì° MusicPlayer: Notifying backend of playback"),await fetch(`/api/v1/player/play/${u.id}`,{method:"POST"}))}catch(X){console.error("‚ùå MusicPlayer: Failed to play track:",X),console.error("‚ùå MusicPlayer: Audio src was:",s.src),e(2,r=!1)}finally{e(9,q=!1),k()}}async function Q(){s&&(s.pause(),e(2,r=!1),await fetch("/api/v1/player/pause",{method:"POST"}),k())}async function te(){if(o.length===0)return;h?e(5,i=Math.floor(Math.random()*o.length)):e(5,i=(i+1)%o.length);const V=o[i];V&&(await j(V),await fetch("/api/v1/player/previous",{method:"POST"}),k())}async function $(){if(o.length!==0){if(m>3)e(1,s.currentTime=0,s);else{e(5,i=i===0?o.length-1:i-1);const V=o[i];V&&await j(V)}await fetch("/api/v1/player/previous",{method:"POST"})}}function G(V){e(4,o=[...o,V]),N(),k()}function U(V){e(4,o=o.filter((X,ge)=>ge!==V)),i>=V&&i>0&&e(5,i--,i),N()}function le(V){e(5,i=V);const X=o[V];X&&j(X)}function Y(){e(4,o=[]),e(5,i=0),N()}async function N(){try{await fetch("/api/v1/player/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queue:o,currentIndex:i})})}catch(V){console.error("Failed to update queue:",V)}}function fe(V){if(!s||!E)return;const X=V.currentTarget.getBoundingClientRect(),ee=(V.clientX-X.left)/X.width*E;e(1,s.currentTime=ee,s),e(7,m=ee)}function H(V){p=!0;const X=V.currentTarget.getBoundingClientRect(),ge=Math.max(0,Math.min(1,(V.clientX-X.left)/X.width));e(7,m=ge*E)}function ie(){s&&p&&(e(1,s.currentTime=m,s),p=!1)}function L(V){const X=V.currentTarget.getBoundingClientRect(),ge=Math.max(0,Math.min(1,(V.clientX-X.left)/X.width));e(6,b=ge),s&&e(1,s.volume=b,s)}function J(){const V=["none","one","all"],X=V.indexOf(v);e(11,v=V[(X+1)%V.length])}function P(){e(12,h=!h)}function ae(){e(10,y=!y)}async function R(){try{const X=await(await fetch("/api/v1/player/current")).json();X.success&&X.current_track&&(e(3,u=X.current_track),e(2,r=X.is_playing),e(7,m=X.position||0));const ee=await(await fetch("/api/v1/player/queue")).json();ee.success&&(e(4,o=ee.queue||[]),e(5,i=ee.current_index||0))}catch(V){console.error("Failed to load player state:",V)}}function re(V){console.log("üéµ MusicPlayer: playTrackFromParent called with track:",V),j(V)}function se(V){console.log("üìù MusicPlayer: addTrackToQueue called with track:",V),G(V)}function de(V,X=0){console.log("üéº MusicPlayer: setQueue called with",V.length,"tracks, startIndex:",X),e(4,o=[...V]),e(5,i=X),V.length>0&&(console.log("üéº MusicPlayer: Starting playback of track:",V[X]),j(V[X])),N()}function ve(V){St[V?"unshift":"push"](()=>{s=V,e(1,s)})}const ce=V=>U(V),me=V=>le(V);return l.$$.update=()=>{l.$$.dirty[0]&1&&_&&k()},[_,s,r,u,o,i,b,m,E,q,y,v,h,A,te,$,U,le,Y,fe,H,ie,L,J,P,ae,re,se,de,ve,ce,me]}class $t extends tt{constructor(t){super(),lt(this,t,xt,Zt,$e,{playTrackFromParent:26,addTrackToQueue:27,setQueue:28},null,[-1,-1])}get playTrackFromParent(){return this.$$.ctx[26]}get addTrackToQueue(){return this.$$.ctx[27]}get setQueue(){return this.$$.ctx[28]}}function yt(l,t,e){const s=l.slice();return s[37]=t[e],s[39]=e,s}function qt(l,t,e){const s=l.slice();return s[37]=t[e],s[39]=e,s}function Tt(l){let t,e,s,r,u='<div class="disc-hole svelte-14q6dk5"></div>',o,i,b,m=l[1].title+"",E,q,y,v=l[1].artist+"",h,_,p,k,T,I,S,M,w,O="‚èÆÔ∏è",A,j,Q=l[2]?"‚è∏Ô∏è":"‚ñ∂Ô∏è",te,$,G,U,le="‚è≠Ô∏è",Y,N,fe="üìã",H,ie;return{c(){t=f("div"),e=f("div"),s=f("div"),r=f("div"),r.innerHTML=u,o=D(),i=f("div"),b=f("div"),E=B(m),q=D(),y=f("div"),h=B(v),_=D(),p=Ke("svg"),k=Ke("circle"),T=Ke("circle"),S=D(),M=f("div"),w=f("button"),w.textContent=O,A=D(),j=f("button"),te=B(Q),G=D(),U=f("button"),U.textContent=le,Y=D(),N=f("button"),N.textContent=fe,this.h()},l(L){t=d(L,"DIV",{class:!0,style:!0});var J=g(t);e=d(J,"DIV",{class:!0,role:!0,tabindex:!0});var P=g(e);s=d(P,"DIV",{class:!0});var ae=g(s);r=d(ae,"DIV",{class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-8awder"&&(r.innerHTML=u),o=C(ae),i=d(ae,"DIV",{class:!0});var R=g(i);b=d(R,"DIV",{class:!0});var re=g(b);E=F(re,m),re.forEach(c),q=C(R),y=d(R,"DIV",{class:!0});var se=g(y);h=F(se,v),se.forEach(c),R.forEach(c),ae.forEach(c),_=C(P),p=Je(P,"svg",{class:!0,width:!0,height:!0});var de=g(p);k=Je(de,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),g(k).forEach(c),T=Je(de,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,class:!0}),g(T).forEach(c),de.forEach(c),P.forEach(c),S=C(J),M=d(J,"DIV",{class:!0});var ve=g(M);w=d(ve,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),oe(w)!=="svelte-1jxrlan"&&(w.textContent=O),A=C(ve),j=d(ve,"BUTTON",{class:!0,title:!0});var ce=g(j);te=F(ce,Q),ce.forEach(c),G=C(ve),U=d(ve,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),oe(U)!=="svelte-90ft8i"&&(U.textContent=le),Y=C(ve),N=d(ve,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),oe(N)!=="svelte-uf367j"&&(N.textContent=fe),ve.forEach(c),J.forEach(c),this.h()},h(){n(r,"class","disc-center svelte-14q6dk5"),n(b,"class","track-title svelte-14q6dk5"),n(y,"class","track-artist svelte-14q6dk5"),n(i,"class","disc-label svelte-14q6dk5"),n(s,"class","disc-surface svelte-14q6dk5"),n(k,"cx","40"),n(k,"cy","40"),n(k,"r","38"),n(k,"stroke","#333"),n(k,"stroke-width","2"),n(k,"fill","none"),n(k,"opacity","0.3"),n(T,"cx","40"),n(T,"cy","40"),n(T,"r","38"),n(T,"stroke","#ff6b9d"),n(T,"stroke-width","2"),n(T,"fill","none"),n(T,"stroke-dasharray",2*Math.PI*38),n(T,"stroke-dashoffset",I=2*Math.PI*38*(1-l[12]/100)),n(T,"stroke-linecap","round"),n(T,"class","progress-circle svelte-14q6dk5"),n(p,"class","progress-ring svelte-14q6dk5"),n(p,"width","80"),n(p,"height","80"),n(e,"class","vinyl-disc svelte-14q6dk5"),n(e,"role","button"),n(e,"tabindex","0"),ue(e,"spinning",l[2]),n(w,"class","control-btn svelte-14q6dk5"),n(w,"title","Previous"),n(j,"class","control-btn play-pause svelte-14q6dk5"),n(j,"title",$=l[2]?"Pause":"Play"),n(U,"class","control-btn svelte-14q6dk5"),n(U,"title","Next"),n(N,"class","control-btn queue-toggle svelte-14q6dk5"),n(N,"title","Queue"),n(M,"class","mini-controls svelte-14q6dk5"),n(t,"class","floating-player svelte-14q6dk5"),ye(t,"left",l[11].x+"px"),ye(t,"top",l[11].y+"px"),ue(t,"dragging",l[10])},m(L,J){W(L,t,J),a(t,e),a(e,s),a(s,r),a(s,o),a(s,i),a(i,b),a(b,E),a(i,q),a(i,y),a(y,h),a(e,_),a(e,p),a(p,k),a(p,T),a(t,S),a(t,M),a(M,w),a(M,A),a(M,j),a(j,te),a(M,G),a(M,U),a(M,Y),a(M,N),H||(ie=[x(e,"click",l[16]),x(e,"mousedown",l[24]),x(w,"click",Ce(l[15])),x(j,"click",Ce(l[13])),x(U,"click",Ce(l[14])),x(N,"click",Ce(l[18]))],H=!0)},p(L,J){J[0]&2&&m!==(m=L[1].title+"")&&ne(E,m),J[0]&2&&v!==(v=L[1].artist+"")&&ne(h,v),J[0]&4096&&I!==(I=2*Math.PI*38*(1-L[12]/100))&&n(T,"stroke-dashoffset",I),J[0]&4&&ue(e,"spinning",L[2]),J[0]&4&&Q!==(Q=L[2]?"‚è∏Ô∏è":"‚ñ∂Ô∏è")&&ne(te,Q),J[0]&4&&$!==($=L[2]?"Pause":"Play")&&n(j,"title",$),J[0]&2048&&ye(t,"left",L[11].x+"px"),J[0]&2048&&ye(t,"top",L[11].y+"px"),J[0]&1024&&ue(t,"dragging",L[10])},d(L){L&&c(t),H=!1,Oe(ie)}}}function Et(l){let t,e,s,r="‚úï",u,o,i,b,m='<div class="large-disc-hole svelte-14q6dk5"></div>',E,q,y,v=l[1].title+"",h,_,p,k=l[1].artist+"",T,I,S,M=(l[1].album||"Unknown Album")+"",w,O,A,j,Q,te="‚èÆÔ∏è",$,G,U=l[2]?"‚è∏Ô∏è":"‚ñ∂Ô∏è",le,Y,N,fe="‚è≠Ô∏è",H,ie,L,J=Fe(l[3])+"",P,ae,R,re,se,de,ve=Fe(l[4])+"",ce,me,V,X,ge,ee=l[8].length>0&&Pt(l),he=l[7]&&l[8].length>0&&It(l);return{c(){t=f("div"),e=f("div"),s=f("button"),s.textContent=r,u=D(),o=f("div"),i=f("div"),b=f("div"),b.innerHTML=m,E=D(),q=f("div"),y=f("div"),h=B(v),_=D(),p=f("div"),T=B(k),I=D(),S=f("div"),w=B(M),O=D(),A=f("div"),j=f("div"),Q=f("button"),Q.textContent=te,$=D(),G=f("button"),le=B(U),Y=D(),N=f("button"),N.textContent=fe,H=D(),ie=f("div"),L=f("span"),P=B(J),ae=D(),R=f("div"),re=f("div"),se=D(),de=f("span"),ce=B(ve),me=D(),ee&&ee.c(),V=D(),he&&he.c(),this.h()},l(K){t=d(K,"DIV",{class:!0});var ke=g(t);e=d(ke,"DIV",{class:!0});var qe=g(e);s=d(qe,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-mi9p6f"&&(s.textContent=r),u=C(qe),o=d(qe,"DIV",{class:!0});var Me=g(o);i=d(Me,"DIV",{class:!0});var we=g(i);b=d(we,"DIV",{class:!0,"data-svelte-h":!0}),oe(b)!=="svelte-u98z6l"&&(b.innerHTML=m),E=C(we),q=d(we,"DIV",{class:!0});var Ee=g(q);y=d(Ee,"DIV",{class:!0});var Be=g(y);h=F(Be,v),Be.forEach(c),_=C(Ee),p=d(Ee,"DIV",{class:!0});var Ue=g(p);T=F(Ue,k),Ue.forEach(c),I=C(Ee),S=d(Ee,"DIV",{class:!0});var je=g(S);w=F(je,M),je.forEach(c),Ee.forEach(c),we.forEach(c),Me.forEach(c),O=C(qe),A=d(qe,"DIV",{class:!0});var _e=g(A);j=d(_e,"DIV",{class:!0});var Ie=g(j);Q=d(Ie,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(Q)!=="svelte-odgk9y"&&(Q.textContent=te),$=C(Ie),G=d(Ie,"BUTTON",{class:!0});var Ne=g(G);le=F(Ne,U),Ne.forEach(c),Y=C(Ie),N=d(Ie,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(N)!=="svelte-121h23z"&&(N.textContent=fe),Ie.forEach(c),H=C(_e),ie=d(_e,"DIV",{class:!0});var pe=g(ie);L=d(pe,"SPAN",{class:!0});var He=g(L);P=F(He,J),He.forEach(c),ae=C(pe),R=d(pe,"DIV",{class:!0});var Se=g(R);re=d(Se,"DIV",{class:!0,style:!0}),g(re).forEach(c),Se.forEach(c),se=C(pe),de=d(pe,"SPAN",{class:!0});var Te=g(de);ce=F(Te,ve),Te.forEach(c),pe.forEach(c),me=C(_e),ee&&ee.l(_e),V=C(_e),he&&he.l(_e),_e.forEach(c),qe.forEach(c),ke.forEach(c),this.h()},h(){n(s,"class","close-btn svelte-14q6dk5"),n(b,"class","large-disc-center svelte-14q6dk5"),n(y,"class","large-track-title svelte-14q6dk5"),n(p,"class","large-track-artist svelte-14q6dk5"),n(S,"class","large-track-album svelte-14q6dk5"),n(q,"class","large-disc-label svelte-14q6dk5"),n(i,"class","large-disc-surface svelte-14q6dk5"),n(o,"class","large-disc svelte-14q6dk5"),ue(o,"spinning",l[2]),n(Q,"class","large-control-btn svelte-14q6dk5"),n(G,"class","large-control-btn play-pause svelte-14q6dk5"),n(N,"class","large-control-btn svelte-14q6dk5"),n(j,"class","control-buttons svelte-14q6dk5"),n(L,"class","time svelte-14q6dk5"),n(re,"class","progress-fill svelte-14q6dk5"),ye(re,"width",l[12]+"%"),n(R,"class","progress-bar svelte-14q6dk5"),n(de,"class","time svelte-14q6dk5"),n(ie,"class","progress-section svelte-14q6dk5"),n(A,"class","full-controls svelte-14q6dk5"),n(e,"class","overlay-content svelte-14q6dk5"),n(t,"class","player-overlay svelte-14q6dk5")},m(K,ke){W(K,t,ke),a(t,e),a(e,s),a(e,u),a(e,o),a(o,i),a(i,b),a(i,E),a(i,q),a(q,y),a(y,h),a(q,_),a(q,p),a(p,T),a(q,I),a(q,S),a(S,w),a(e,O),a(e,A),a(A,j),a(j,Q),a(j,$),a(j,G),a(G,le),a(j,Y),a(j,N),a(A,H),a(A,ie),a(ie,L),a(L,P),a(ie,ae),a(ie,R),a(R,re),a(ie,se),a(ie,de),a(de,ce),a(A,me),ee&&ee.m(A,null),a(A,V),he&&he.m(A,null),X||(ge=[x(s,"click",l[17]),x(Q,"click",l[15]),x(G,"click",l[13]),x(N,"click",l[14]),x(e,"click",Ce(l[28])),x(t,"click",l[17])],X=!0)},p(K,ke){ke[0]&2&&v!==(v=K[1].title+"")&&ne(h,v),ke[0]&2&&k!==(k=K[1].artist+"")&&ne(T,k),ke[0]&2&&M!==(M=(K[1].album||"Unknown Album")+"")&&ne(w,M),ke[0]&4&&ue(o,"spinning",K[2]),ke[0]&4&&U!==(U=K[2]?"‚è∏Ô∏è":"‚ñ∂Ô∏è")&&ne(le,U),ke[0]&8&&J!==(J=Fe(K[3])+"")&&ne(P,J),ke[0]&4096&&ye(re,"width",K[12]+"%"),ke[0]&16&&ve!==(ve=Fe(K[4])+"")&&ne(ce,ve),K[8].length>0?ee?ee.p(K,ke):(ee=Pt(K),ee.c(),ee.m(A,V)):ee&&(ee.d(1),ee=null),K[7]&&K[8].length>0?he?he.p(K,ke):(he=It(K),he.c(),he.m(A,null)):he&&(he.d(1),he=null)},d(K){K&&c(t),ee&&ee.d(),he&&he.d(),X=!1,Oe(ge)}}}function Pt(l){let t,e,s,r=l[9]+1+"",u,o,i=l[8].length+"",b,m,E,q=l[7]?"üîº Hide Queue":"üîΩ Show Queue",y,v,h;return{c(){t=f("div"),e=f("span"),s=B("Track "),u=B(r),o=B(" of "),b=B(i),m=D(),E=f("button"),y=B(q),this.h()},l(_){t=d(_,"DIV",{class:!0});var p=g(t);e=d(p,"SPAN",{});var k=g(e);s=F(k,"Track "),u=F(k,r),o=F(k," of "),b=F(k,i),k.forEach(c),m=C(p),E=d(p,"BUTTON",{class:!0});var T=g(E);y=F(T,q),T.forEach(c),p.forEach(c),this.h()},h(){n(E,"class","queue-toggle-btn svelte-14q6dk5"),n(t,"class","queue-info svelte-14q6dk5")},m(_,p){W(_,t,p),a(t,e),a(e,s),a(e,u),a(e,o),a(e,b),a(t,m),a(t,E),a(E,y),v||(h=x(E,"click",l[20]),v=!0)},p(_,p){p[0]&512&&r!==(r=_[9]+1+"")&&ne(u,r),p[0]&256&&i!==(i=_[8].length+"")&&ne(b,i),p[0]&128&&q!==(q=_[7]?"üîº Hide Queue":"üîΩ Show Queue")&&ne(y,q)},d(_){_&&c(t),v=!1,h()}}}function It(l){let t,e,s,r="Current Queue",u,o,i="üóëÔ∏è Clear All",b,m,E,q,y=Ve(l[8]),v=[];for(let h=0;h<y.length;h+=1)v[h]=Dt(qt(l,y,h));return{c(){t=f("div"),e=f("div"),s=f("h4"),s.textContent=r,u=D(),o=f("button"),o.textContent=i,b=D(),m=f("div");for(let h=0;h<v.length;h+=1)v[h].c();this.h()},l(h){t=d(h,"DIV",{class:!0});var _=g(t);e=d(_,"DIV",{class:!0});var p=g(e);s=d(p,"H4",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-1q92ub0"&&(s.textContent=r),u=C(p),o=d(p,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),oe(o)!=="svelte-1elx9h3"&&(o.textContent=i),p.forEach(c),b=C(_),m=d(_,"DIV",{class:!0});var k=g(m);for(let T=0;T<v.length;T+=1)v[T].l(k);k.forEach(c),_.forEach(c),this.h()},h(){n(s,"class","svelte-14q6dk5"),n(o,"class","clear-queue svelte-14q6dk5"),n(o,"title","Clear Queue"),n(e,"class","queue-header svelte-14q6dk5"),n(m,"class","queue-list svelte-14q6dk5"),n(t,"class","queue-section svelte-14q6dk5")},m(h,_){W(h,t,_),a(t,e),a(e,s),a(e,u),a(e,o),a(t,b),a(t,m);for(let p=0;p<v.length;p+=1)v[p]&&v[p].m(m,null);E||(q=x(o,"click",l[23]),E=!0)},p(h,_){if(_[0]&6292224){y=Ve(h[8]);let p;for(p=0;p<y.length;p+=1){const k=qt(h,y,p);v[p]?v[p].p(k,_):(v[p]=Dt(k),v[p].c(),v[p].m(m,null))}for(;p<v.length;p+=1)v[p].d(1);v.length=y.length}},d(h){h&&c(t),We(v,h),E=!1,q()}}}function Ct(l){let t,e="‚ñ∂Ô∏è";return{c(){t=f("span"),t.textContent=e,this.h()},l(s){t=d(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-17cyced"&&(t.textContent=e),this.h()},h(){n(t,"class","now-playing svelte-14q6dk5")},m(s,r){W(s,t,r)},d(s){s&&c(t)}}}function Dt(l){let t,e,s=l[39]+1+"",r,u,o,i,b=l[37].title+"",m,E,q,y=l[37].artist+"",v,h,_,p,k,T="‚úï",I,S,M,w=l[39]===l[9]&&Ct();function O(){return l[29](l[39])}function A(){return l[30](l[39])}return{c(){t=f("div"),e=f("span"),r=B(s),u=D(),o=f("div"),i=f("div"),m=B(b),E=D(),q=f("div"),v=B(y),h=D(),_=f("div"),w&&w.c(),p=D(),k=f("button"),k.textContent=T,I=D(),this.h()},l(j){t=d(j,"DIV",{class:!0});var Q=g(t);e=d(Q,"SPAN",{class:!0});var te=g(e);r=F(te,s),te.forEach(c),u=C(Q),o=d(Q,"DIV",{class:!0});var $=g(o);i=d($,"DIV",{class:!0});var G=g(i);m=F(G,b),G.forEach(c),E=C($),q=d($,"DIV",{class:!0});var U=g(q);v=F(U,y),U.forEach(c),$.forEach(c),h=C(Q),_=d(Q,"DIV",{class:!0});var le=g(_);w&&w.l(le),p=C(le),k=d(le,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),oe(k)!=="svelte-89g1tx"&&(k.textContent=T),le.forEach(c),I=C(Q),Q.forEach(c),this.h()},h(){n(e,"class","queue-number svelte-14q6dk5"),n(i,"class","queue-track-title svelte-14q6dk5"),n(q,"class","queue-track-artist svelte-14q6dk5"),n(o,"class","queue-track-info svelte-14q6dk5"),n(k,"class","remove-btn svelte-14q6dk5"),n(k,"title","Remove from queue"),n(_,"class","queue-actions svelte-14q6dk5"),n(t,"class","queue-item svelte-14q6dk5"),ue(t,"current",l[39]===l[9])},m(j,Q){W(j,t,Q),a(t,e),a(e,r),a(t,u),a(t,o),a(o,i),a(i,m),a(o,E),a(o,q),a(q,v),a(t,h),a(t,_),w&&w.m(_,null),a(_,p),a(_,k),a(t,I),S||(M=[x(k,"click",Ce(O)),x(t,"click",A)],S=!0)},p(j,Q){l=j,Q[0]&256&&b!==(b=l[37].title+"")&&ne(m,b),Q[0]&256&&y!==(y=l[37].artist+"")&&ne(v,y),l[39]===l[9]?w||(w=Ct(),w.c(),w.m(_,p)):w&&(w.d(1),w=null),Q[0]&512&&ue(t,"current",l[39]===l[9])},d(j){j&&c(t),w&&w.d(),S=!1,Oe(M)}}}function wt(l){let t,e,s,r="‚úï",u,o,i,b="üéµ Music Queue",m,E,q,y;function v(I,S){return I[8].length>0?tl:el}let h=v(l),_=h(l);function p(I,S){return I[8].length>0?sl:ll}let k=p(l),T=k(l);return{c(){t=f("div"),e=f("div"),s=f("button"),s.textContent=r,u=D(),o=f("div"),i=f("h3"),i.textContent=b,m=D(),_.c(),E=D(),T.c(),this.h()},l(I){t=d(I,"DIV",{class:!0});var S=g(t);e=d(S,"DIV",{class:!0});var M=g(e);s=d(M,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-zsuifo"&&(s.textContent=r),u=C(M),o=d(M,"DIV",{class:!0});var w=g(o);i=d(w,"H3",{class:!0,"data-svelte-h":!0}),oe(i)!=="svelte-zv9d9j"&&(i.textContent=b),m=C(w),_.l(w),w.forEach(c),E=C(M),T.l(M),M.forEach(c),S.forEach(c),this.h()},h(){n(s,"class","close-btn svelte-14q6dk5"),n(i,"class","svelte-14q6dk5"),n(o,"class","queue-overlay-header svelte-14q6dk5"),n(e,"class","queue-overlay-content svelte-14q6dk5"),n(t,"class","queue-overlay svelte-14q6dk5")},m(I,S){W(I,t,S),a(t,e),a(e,s),a(e,u),a(e,o),a(o,i),a(o,m),_.m(o,null),a(e,E),T.m(e,null),q||(y=[x(s,"click",l[19]),x(e,"click",Ce(l[27])),x(t,"click",l[19])],q=!0)},p(I,S){h===(h=v(I))&&_?_.p(I,S):(_.d(1),_=h(I),_&&(_.c(),_.m(o,null))),k===(k=p(I))&&T?T.p(I,S):(T.d(1),T=k(I),T&&(T.c(),T.m(e,null)))},d(I){I&&c(t),_.d(),T.d(),q=!1,Oe(y)}}}function el(l){let t,e="No tracks in queue";return{c(){t=f("p"),t.textContent=e,this.h()},l(s){t=d(s,"P",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1umg22x"&&(t.textContent=e),this.h()},h(){n(t,"class","svelte-14q6dk5")},m(s,r){W(s,t,r)},p:De,d(s){s&&c(t)}}}function tl(l){let t,e=l[8].length+"",s,r,u=l[8].length!==1?"s":"",o,i,b,m,E="üóëÔ∏è Clear All",q,y;return{c(){t=f("p"),s=B(e),r=B(" track"),o=B(u),i=B(" in queue"),b=D(),m=f("button"),m.textContent=E,this.h()},l(v){t=d(v,"P",{class:!0});var h=g(t);s=F(h,e),r=F(h," track"),o=F(h,u),i=F(h," in queue"),h.forEach(c),b=C(v),m=d(v,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(m)!=="svelte-ksw2ll"&&(m.textContent=E),this.h()},h(){n(t,"class","svelte-14q6dk5"),n(m,"class","clear-all-btn svelte-14q6dk5")},m(v,h){W(v,t,h),a(t,s),a(t,r),a(t,o),a(t,i),W(v,b,h),W(v,m,h),q||(y=x(m,"click",l[23]),q=!0)},p(v,h){h[0]&256&&e!==(e=v[8].length+"")&&ne(s,e),h[0]&256&&u!==(u=v[8].length!==1?"s":"")&&ne(o,u)},d(v){v&&(c(t),c(b),c(m)),q=!1,y()}}}function ll(l){let t,e='<span class="empty-icon svelte-14q6dk5">üéµ</span> <h4 class="svelte-14q6dk5">Queue is Empty</h4> <p class="svelte-14q6dk5">Add some tracks to start your music journey!</p>';return{c(){t=f("div"),t.innerHTML=e,this.h()},l(s){t=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1f6troa"&&(t.innerHTML=e),this.h()},h(){n(t,"class","empty-queue svelte-14q6dk5")},m(s,r){W(s,t,r)},p:De,d(s){s&&c(t)}}}function sl(l){let t,e=Ve(l[8]),s=[];for(let r=0;r<e.length;r+=1)s[r]=Vt(yt(l,e,r));return{c(){t=f("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){t=d(r,"DIV",{class:!0});var u=g(t);for(let o=0;o<s.length;o+=1)s[o].l(u);u.forEach(c),this.h()},h(){n(t,"class","queue-overlay-list svelte-14q6dk5")},m(r,u){W(r,t,u);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(t,null)},p(r,u){if(u[0]&6292224){e=Ve(r[8]);let o;for(o=0;o<e.length;o+=1){const i=yt(r,e,o);s[o]?s[o].p(i,u):(s[o]=Vt(i),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=e.length}},d(r){r&&c(t),We(s,r)}}}function al(l){let t,e=l[39]+1+"",s;return{c(){t=f("span"),s=B(e),this.h()},l(r){t=d(r,"SPAN",{class:!0});var u=g(t);s=F(u,e),u.forEach(c),this.h()},h(){n(t,"class","track-number svelte-14q6dk5")},m(r,u){W(r,t,u),a(t,s)},d(r){r&&c(t)}}}function nl(l){let t,e="‚ñ∂Ô∏è";return{c(){t=f("span"),t.textContent=e,this.h()},l(s){t=d(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1xu0uxk"&&(t.textContent=e),this.h()},h(){n(t,"class","playing-indicator svelte-14q6dk5")},m(s,r){W(s,t,r)},d(s){s&&c(t)}}}function Vt(l){let t,e,s,r,u,o=l[37].title+"",i,b,m,E=l[37].artist+"",q,y,v,h=(l[37].album||"Unknown Album")+"",_,p,k,T=Fe(l[37].duration)+"",I,S,M,w,O="üóëÔ∏è",A,j,Q;function te(Y,N){return Y[39]===Y[9]?nl:al}let $=te(l),G=$(l);function U(){return l[31](l[39])}function le(){return l[32](l[39])}return{c(){t=f("div"),e=f("div"),G.c(),s=D(),r=f("div"),u=f("div"),i=B(o),b=D(),m=f("div"),q=B(E),y=D(),v=f("div"),_=B(h),p=D(),k=f("div"),I=B(T),S=D(),M=f("div"),w=f("button"),w.textContent=O,A=D(),this.h()},l(Y){t=d(Y,"DIV",{class:!0});var N=g(t);e=d(N,"DIV",{class:!0});var fe=g(e);G.l(fe),fe.forEach(c),s=C(N),r=d(N,"DIV",{class:!0});var H=g(r);u=d(H,"DIV",{class:!0});var ie=g(u);i=F(ie,o),ie.forEach(c),b=C(H),m=d(H,"DIV",{class:!0});var L=g(m);q=F(L,E),L.forEach(c),y=C(H),v=d(H,"DIV",{class:!0});var J=g(v);_=F(J,h),J.forEach(c),H.forEach(c),p=C(N),k=d(N,"DIV",{class:!0});var P=g(k);I=F(P,T),P.forEach(c),S=C(N),M=d(N,"DIV",{class:!0});var ae=g(M);w=d(ae,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),oe(w)!=="svelte-14obe77"&&(w.textContent=O),ae.forEach(c),A=C(N),N.forEach(c),this.h()},h(){n(e,"class","queue-item-number svelte-14q6dk5"),n(u,"class","queue-item-title svelte-14q6dk5"),n(m,"class","queue-item-artist svelte-14q6dk5"),n(v,"class","queue-item-album svelte-14q6dk5"),n(r,"class","queue-item-info svelte-14q6dk5"),n(k,"class","queue-item-duration svelte-14q6dk5"),n(w,"class","queue-remove-btn svelte-14q6dk5"),n(w,"title","Remove from queue"),n(M,"class","queue-item-actions svelte-14q6dk5"),n(t,"class","queue-overlay-item svelte-14q6dk5"),ue(t,"current",l[39]===l[9])},m(Y,N){W(Y,t,N),a(t,e),G.m(e,null),a(t,s),a(t,r),a(r,u),a(u,i),a(r,b),a(r,m),a(m,q),a(r,y),a(r,v),a(v,_),a(t,p),a(t,k),a(k,I),a(t,S),a(t,M),a(M,w),a(t,A),j||(Q=[x(w,"click",Ce(U)),x(t,"click",le)],j=!0)},p(Y,N){l=Y,$!==($=te(l))&&(G.d(1),G=$(l),G&&(G.c(),G.m(e,null))),N[0]&256&&o!==(o=l[37].title+"")&&ne(i,o),N[0]&256&&E!==(E=l[37].artist+"")&&ne(q,E),N[0]&256&&h!==(h=(l[37].album||"Unknown Album")+"")&&ne(_,h),N[0]&256&&T!==(T=Fe(l[37].duration)+"")&&ne(I,T),N[0]&512&&ue(t,"current",l[39]===l[9])},d(Y){Y&&c(t),G.d(),j=!1,Oe(Q)}}}function rl(l){let t,e,s,r=l[0]&&l[1]&&Tt(l),u=l[5]&&l[1]&&Et(l),o=l[6]&&wt(l);return{c(){r&&r.c(),t=D(),u&&u.c(),e=D(),o&&o.c(),s=dt()},l(i){r&&r.l(i),t=C(i),u&&u.l(i),e=C(i),o&&o.l(i),s=dt()},m(i,b){r&&r.m(i,b),W(i,t,b),u&&u.m(i,b),W(i,e,b),o&&o.m(i,b),W(i,s,b)},p(i,b){i[0]&&i[1]?r?r.p(i,b):(r=Tt(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),i[5]&&i[1]?u?u.p(i,b):(u=Et(i),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),i[6]?o?o.p(i,b):(o=wt(i),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},i:De,o:De,d(i){i&&(c(t),c(e),c(s)),r&&r.d(i),u&&u.d(i),o&&o.d(i)}}}function Fe(l){if(!l||isNaN(l))return"0:00";const t=Math.floor(l/60),e=Math.floor(l%60);return`${t}:${e.toString().padStart(2,"0")}`}function ol(l,t,e){let s,r;Ot(l,Qt,P=>e(26,r=P));let{musicPlayer:u=null}=t,o=!1,i=!1,b=!1,m=!1,E=null,q=!1,y=0,v=0,h=[],_=0,p=!1,k={x:20,y:window.innerHeight-200},T={x:0,y:0};et(()=>{e(0,o=!0),console.log("üéµ FloatingPlayer: Component mounted"),e(11,k={x:window.innerWidth-100,y:window.innerHeight-200}),console.log("üéµ FloatingPlayer: Initial position set:",k)}),Nt(()=>{});function I(){console.log("üéµ FloatingPlayer: togglePlayPause called"),console.log("üéµ FloatingPlayer: Store state:",r),u!=null&&u.togglePlayPause?(console.log("üéµ FloatingPlayer: Calling musicPlayer.togglePlayPause directly"),u.togglePlayPause()):r!=null&&r.togglePlayPause?(console.log("üéµ FloatingPlayer: Calling store togglePlayPause"),r.togglePlayPause()):(console.warn("üéµ FloatingPlayer: No togglePlayPause method available"),console.warn("üéµ FloatingPlayer: musicPlayer:",u),console.warn("üéµ FloatingPlayer: store:",r))}function S(){console.log("üéµ FloatingPlayer: nextTrack called"),u!=null&&u.nextTrack?(console.log("üéµ FloatingPlayer: Calling musicPlayer.nextTrack directly"),u.nextTrack()):r!=null&&r.nextTrack?(console.log("üéµ FloatingPlayer: Calling store nextTrack"),r.nextTrack()):console.warn("üéµ FloatingPlayer: No nextTrack method available")}function M(){console.log("üéµ FloatingPlayer: previousTrack called"),u!=null&&u.previousTrack?(console.log("üéµ FloatingPlayer: Calling musicPlayer.previousTrack directly"),u.previousTrack()):r!=null&&r.previousTrack?(console.log("üéµ FloatingPlayer: Calling store previousTrack"),r.previousTrack()):console.warn("üéµ FloatingPlayer: No previousTrack method available")}function w(){e(5,i=!i),i||e(7,m=!1)}function O(){e(5,i=!1),e(7,m=!1)}function A(){e(6,b=!b)}function j(){e(6,b=!1)}function Q(){e(7,m=!m)}function te(P){u!=null&&u.setQueue&&h.length>0&&(console.log("üéµ FloatingPlayer: Playing from queue index:",P),u.setQueue(h,P))}function $(P){if(h.length>0&&P>=0&&P<h.length){console.log("üéµ FloatingPlayer: Removing from queue index:",P);const ae=h.filter((R,re)=>re!==P);if(u!=null&&u.setQueue){const R=P<_?_-1:_;u.setQueue(ae,Math.max(0,R))}}}function G(){u!=null&&u.setQueue&&(console.log("üéµ FloatingPlayer: Clearing queue"),u.setQueue([],0))}function U(P){e(10,p=!0),T.x=P.clientX-k.x,T.y=P.clientY-k.y,document.addEventListener("mousemove",le),document.addEventListener("mouseup",Y)}function le(P){p&&(e(11,k.x=Math.max(0,Math.min(window.innerWidth-80,P.clientX-T.x)),k),e(11,k.y=Math.max(0,Math.min(window.innerHeight-160,P.clientY-T.y)),k))}function Y(){e(10,p=!1),document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",Y)}function N(P){ct.call(this,l,P)}function fe(P){ct.call(this,l,P)}const H=P=>$(P),ie=P=>te(P),L=P=>$(P),J=P=>te(P);return l.$$set=P=>{"musicPlayer"in P&&e(25,u=P.musicPlayer)},l.$$.update=()=>{l.$$.dirty[0]&67108871&&r&&(e(1,E=r.currentTrack||null),e(2,q=r.isPlaying||!1),e(3,y=r.currentTime||0),e(4,v=r.duration||0),r.volume,e(8,h=r.queue||[]),e(9,_=r.currentIndex||0),console.log("üéµ FloatingPlayer: Store updated:",{hasCurrentTrack:!!E,currentTrackTitle:E==null?void 0:E.title,isPlaying:q,mounted:o,shouldShow:o&&E,storeMethods:{hasTogglePlayPause:typeof r.togglePlayPause,hasNextTrack:typeof r.nextTrack,hasPreviousTrack:typeof r.previousTrack,allStoreKeys:Object.keys(r||{})}})),l.$$.dirty[0]&24&&e(12,s=v>0?y/v*100:0),l.$$.dirty[0]&7&&console.log("üéµ FloatingPlayer: State check:",{mounted:o,hasCurrentTrack:!!E,currentTrackTitle:E==null?void 0:E.title,isPlaying:q,showDisc:o&&E})},[o,E,q,y,v,i,b,m,h,_,p,k,s,I,S,M,w,O,A,j,Q,te,$,G,U,u,r,N,fe,H,ie,L,J]}class il extends tt{constructor(t){super(),lt(this,t,ol,rl,$e,{musicPlayer:25},null,[-1,-1])}}function Mt(l,t,e){const s=l.slice();return s[9]=t[e],s}function jt(l){let t,e,s,r=l[9].icon+"",u,o,i,b=l[9].label+"",m,E,q;return{c(){t=f("li"),e=f("a"),s=f("span"),u=B(r),o=D(),i=f("span"),m=B(b),q=D(),this.h()},l(y){t=d(y,"LI",{class:!0});var v=g(t);e=d(v,"A",{href:!0,class:!0,"aria-current":!0});var h=g(e);s=d(h,"SPAN",{class:!0,"aria-hidden":!0});var _=g(s);u=F(_,r),_.forEach(c),o=C(h),i=d(h,"SPAN",{class:!0});var p=g(i);m=F(p,b),p.forEach(c),h.forEach(c),q=C(v),v.forEach(c),this.h()},h(){n(s,"class","nav-icon svelte-1i63kkz"),n(s,"aria-hidden","true"),n(i,"class","nav-label svelte-1i63kkz"),n(e,"href",l[9].href),n(e,"class","nav-link svelte-1i63kkz"),n(e,"aria-current",E=l[3]===l[9].href?"page":void 0),ue(e,"active",l[3]===l[9].href),n(t,"class","nav-item")},m(y,v){W(y,t,v),a(t,e),a(e,s),a(s,u),a(e,o),a(e,i),a(i,m),a(t,q)},p(y,v){v&8&&E!==(E=y[3]===y[9].href?"page":void 0)&&n(e,"aria-current",E),v&24&&ue(e,"active",y[3]===y[9].href)},d(y){y&&c(t)}}}function ul(l){let t,e,s,r,u,o,i='<h1 class="brand-title svelte-1i63kkz"><span class="brand-icon svelte-1i63kkz">ü§ñ</span> <span class="brand-text svelte-1i63kkz">StepheyBot</span> <span class="brand-subtitle svelte-1i63kkz">Music</span></h1>',b,m,E,q,y,v,h,_="System Time",p,k,T,I,S,M='<div class="pulse-dot svelte-1i63kkz"></div> <span class="status-text svelte-1i63kkz">Online</span>',w,O,A,j,Q,te=`<div class="container"><div class="footer-content svelte-1i63kkz"><div class="footer-info"><p class="footer-text svelte-1i63kkz">Powered by <span class="text-neon-cyan">StepheyBot AI</span>
                        ‚Ä¢ Built with <span class="text-neon-pink">Svelte</span>
                        &amp;
                        <span class="text-neon-purple">Rust</span></p></div> <div class="footer-links svelte-1i63kkz"><a href="/health" class="footer-link svelte-1i63kkz">System Health</a> <a href="/api/v1/status" class="footer-link svelte-1i63kkz">API Status</a> <a href="https://github.com/RM-Stephey/stepheybot-music" class="footer-link svelte-1i63kkz" target="_blank" rel="noopener noreferrer">GitHub</a></div></div></div>`,$,G,U,le,Y,N,fe=Ve(l[4]),H=[];for(let P=0;P<fe.length;P+=1)H[P]=jt(Mt(l,fe,P));const ie=l[7].default,L=Lt(ie,l,l[6],null);G=new il({props:{musicPlayer:l[0]}});let J={};return Y=new $t({props:J}),l[8](Y),{c(){t=D(),e=f("div"),s=f("header"),r=f("div"),u=f("div"),o=f("div"),o.innerHTML=i,b=D(),m=f("nav"),E=f("ul");for(let P=0;P<H.length;P+=1)H[P].c();q=D(),y=f("div"),v=f("div"),h=f("span"),h.textContent=_,p=D(),k=f("span"),T=B(l[2]),I=D(),S=f("div"),S.innerHTML=M,w=D(),O=f("main"),A=f("div"),L&&L.c(),j=D(),Q=f("footer"),Q.innerHTML=te,$=D(),_t(G.$$.fragment),U=D(),le=f("div"),_t(Y.$$.fragment),this.h()},l(P){Bt("svelte-1lamcaa",document.head).forEach(c),t=C(P),e=d(P,"DIV",{class:!0});var R=g(e);s=d(R,"HEADER",{class:!0});var re=g(s);r=d(re,"DIV",{class:!0});var se=g(r);u=d(se,"DIV",{class:!0});var de=g(u);o=d(de,"DIV",{class:!0,"data-svelte-h":!0}),oe(o)!=="svelte-fle2f4"&&(o.innerHTML=i),b=C(de),m=d(de,"NAV",{class:!0,"aria-label":!0});var ve=g(m);E=d(ve,"UL",{class:!0});var ce=g(E);for(let K=0;K<H.length;K+=1)H[K].l(ce);ce.forEach(c),ve.forEach(c),q=C(de),y=d(de,"DIV",{class:!0});var me=g(y);v=d(me,"DIV",{class:!0});var V=g(v);h=d(V,"SPAN",{class:!0,"data-svelte-h":!0}),oe(h)!=="svelte-jz1u7g"&&(h.textContent=_),p=C(V),k=d(V,"SPAN",{class:!0});var X=g(k);T=F(X,l[2]),X.forEach(c),V.forEach(c),I=C(me),S=d(me,"DIV",{class:!0,"data-svelte-h":!0}),oe(S)!=="svelte-18ryq4t"&&(S.innerHTML=M),me.forEach(c),de.forEach(c),se.forEach(c),re.forEach(c),w=C(R),O=d(R,"MAIN",{class:!0});var ge=g(O);A=d(ge,"DIV",{class:!0});var ee=g(A);L&&L.l(ee),ee.forEach(c),ge.forEach(c),j=C(R),Q=d(R,"FOOTER",{class:!0,"data-svelte-h":!0}),oe(Q)!=="svelte-3q5b7d"&&(Q.innerHTML=te),$=C(R),ht(G.$$.fragment,R),U=C(R),le=d(R,"DIV",{style:!0});var he=g(le);ht(Y.$$.fragment,he),he.forEach(c),R.forEach(c),this.h()},h(){document.title="StepheyBot Music - AI-Powered Music Recommendations",n(o,"class","brand svelte-1i63kkz"),n(E,"class","nav-list svelte-1i63kkz"),n(m,"class","nav"),n(m,"aria-label","Main navigation"),n(h,"class","status-label svelte-1i63kkz"),n(k,"class","status-value text-glow svelte-1i63kkz"),n(v,"class","status-time svelte-1i63kkz"),n(S,"class","status-indicator svelte-1i63kkz"),n(y,"class","status-info svelte-1i63kkz"),n(u,"class","header-content svelte-1i63kkz"),n(r,"class","container"),n(s,"class","header svelte-1i63kkz"),n(A,"class","content-wrapper svelte-1i63kkz"),n(O,"class","main-content svelte-1i63kkz"),n(Q,"class","footer svelte-1i63kkz"),ye(le,"display","none"),n(e,"class","app-layout svelte-1i63kkz"),ue(e,"loaded",l[1])},m(P,ae){W(P,t,ae),W(P,e,ae),a(e,s),a(s,r),a(r,u),a(u,o),a(u,b),a(u,m),a(m,E);for(let R=0;R<H.length;R+=1)H[R]&&H[R].m(E,null);a(u,q),a(u,y),a(y,v),a(v,h),a(v,p),a(v,k),a(k,T),a(y,I),a(y,S),a(e,w),a(e,O),a(O,A),L&&L.m(A,null),a(e,j),a(e,Q),a(e,$),vt(G,e,null),a(e,U),a(e,le),vt(Y,le,null),N=!0},p(P,[ae]){if(ae&24){fe=Ve(P[4]);let se;for(se=0;se<fe.length;se+=1){const de=Mt(P,fe,se);H[se]?H[se].p(de,ae):(H[se]=jt(de),H[se].c(),H[se].m(E,null))}for(;se<H.length;se+=1)H[se].d(1);H.length=fe.length}(!N||ae&4)&&ne(T,P[2]),L&&L.p&&(!N||ae&64)&&At(L,ie,P,P[6],N?Ft(ie,P[6],ae,null):zt(P[6]),null);const R={};ae&1&&(R.musicPlayer=P[0]),G.$set(R);const re={};Y.$set(re),(!N||ae&2)&&ue(e,"loaded",P[1])},i(P){N||(xe(L,P),xe(G.$$.fragment,P),xe(Y.$$.fragment,P),N=!0)},o(P){Ze(L,P),Ze(G.$$.fragment,P),Ze(Y.$$.fragment,P),N=!1},d(P){P&&(c(t),c(e)),We(H,P),L&&L.d(P),ft(G),l[8](null),ft(Y)}}}function cl(l,t,e){let s,r;Ot(l,Ut,y=>e(5,r=y));let{$$slots:u={},$$scope:o}=t,i=!1,b=new Date().toLocaleTimeString(),m;et(()=>{e(1,i=!0);const y=setInterval(()=>{e(2,b=new Date().toLocaleTimeString())},1e3);return()=>clearInterval(y)});const E=[{href:"/",label:"Dashboard",icon:"üè†"},{href:"/search",label:"Search",icon:"üîç"},{href:"/downloads",label:"Downloads",icon:"‚¨áÔ∏è"},{href:"/discover",label:"Discover",icon:"üé≤"},{href:"/recommendations",label:"Recommendations",icon:"üéµ"},{href:"/playlists",label:"Playlists",icon:"üìù"},{href:"/library",label:"Library",icon:"üìö"},{href:"/stats",label:"Stats",icon:"üìä"}];function q(y){St[y?"unshift":"push"](()=>{m=y,e(0,m)})}return l.$$set=y=>{"$$scope"in y&&e(6,o=y.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&m&&Ht(m),l.$$.dirty&32&&e(3,s=r.url.pathname)},[m,i,b,s,E,r,o,u,q]}class kl extends tt{constructor(t){super(),lt(this,t,cl,ul,$e,{})}}export{kl as component};
